{"config":{"lang":["de"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Dokumentation f\u00fcr meine Entwicklungsumgebung und den Einsatz von Servern","text":""},{"location":"#serverinstallation","title":"Serverinstallation","text":"<p>Mein Server verwendet Ubuntu 24.04 als Betriebssystem, w\u00e4hrend mein Entwicklungsrechner mit Ubuntu 26.04 l\u00e4uft. Dies erm\u00f6glicht eine klare Trennung zwischen Produktions- und Entwicklungsumgebung und erleichtert die Verwaltung von Abh\u00e4ngigkeiten und Updates.</p>"},{"location":"#verwendete-technologien-auf-dem-produktionsserver","title":"Verwendete Technologien auf dem Produktionsserver","text":"<p>Der Produktionsserver setzt folgende Technologien ein:</p> <ul> <li>Forgejo: Selbstgehostete Git-Server-L\u00f6sung zur Verwaltung von Quellcode-Repositories.</li> <li>Git: Versionskontrollsystem f\u00fcr die Quellcodeverwaltung.</li> <li>GitHub CLI (<code>gh</code>): Kommandozeilenwerkzeug zur Interaktion mit GitHub-Repositories.</li> <li>ASP.NET Core 10: Framework f\u00fcr die Entwicklung und Bereitstellung von Webanwendungen.</li> <li>Java: Programmiersprache und Laufzeitumgebung f\u00fcr verschiedene Anwendungen.</li> <li>PHP: Skriptsprache f\u00fcr Webentwicklung und serverseitige Anwendungen.</li> <li>PostgreSQL: Relationale Datenbank f\u00fcr die Speicherung und Verwaltung von Daten.</li> <li>Nginx: Webserver und Reverse Proxy zur Auslieferung von Webinhalten.</li> <li>Python: Programmiersprache f\u00fcr Automatisierung, Skripte und Webanwendungen.</li> <li>Drupal: Open-Source-CMS f\u00fcr komplexe Webanwendungen und Websites.</li> <li>Typo3: Flexibles Enterprise-CMS f\u00fcr professionelle Webprojekte.</li> <li>Orchard CMS: .NET-basiertes Content-Management-System f\u00fcr modulare Webanwendungen.</li> <li>MediaWiki: Open-Source-Wiki-Software zur Erstellung und Verwaltung von Wissensdatenbanken und Dokumentationen.</li> <li>Switch2OSM Tileserver: OpenStreetMap-Tileserver-L\u00f6sung zur Bereitstellung von Kartendaten f\u00fcr Webanwendungen.</li> </ul> <p>Hinweis: Der Produktionsserver ist so konfiguriert, dass m\u00f6glichst keine Cookie-Banner erforderlich sind, da alle Daten ausschlie\u00dflich auf dem eigenen Server verarbeitet und gespeichert werden. Externe Dienste werden vermieden, um Datenschutz und Kontrolle \u00fcber die Daten zu gew\u00e4hrleisten.</p>"},{"location":"#verwendete-technologien-auf-meinem-entwicklungsrechner","title":"Verwendete Technologien auf meinem Entwicklungsrechner","text":"<p>Auf meinem Entwicklungsrechner kommen folgende Technologien zum Einsatz:</p> <ul> <li>Visual Studio Code: Quelltexteditor mit zahlreichen Erweiterungen f\u00fcr verschiedene Programmiersprachen.</li> <li>Git: Versionskontrollsystem zur Verwaltung von Quellcode.</li> <li>Node.js: JavaScript-Laufzeitumgebung f\u00fcr serverseitige Anwendungen und Tools.</li> <li>Python: Programmiersprache f\u00fcr Skripte, Automatisierung und Webentwicklung.</li> <li>.NET SDK: Entwicklungsumgebung f\u00fcr .NET-Anwendungen.</li> <li>PostgreSQL: Relationale Datenbank f\u00fcr lokale Entwicklungs- und Testzwecke.</li> <li>PHP: Skriptsprache f\u00fcr Webentwicklung und lokale Tests.</li> <li>Nginx: Webserver f\u00fcr lokale Entwicklungsumgebungen.</li> <li>Chrome: Webbrowser zur Entwicklung und zum Testen von Webanwendungen.</li> <li>Java : Programmiersprache und Laufzeitumgebung f\u00fcr die Entwicklung und das Testen von vpn Java-Anwendungen.</li> <li>Golang: Programmiersprache, die f\u00fcr die Entwicklung von effizienten und skalierbaren Anwendungen verwendet wird, insbesondere f\u00fcr Netzwerk- und Backend-Services.</li> <li>Rust:Moderne Programmiersprache mit Fokus auf Sicherheit und Performance, ideal f\u00fcr Systemprogrammierung und performante Anwendungen.</li> <li>C/C++: Klassische Programmiersprachen f\u00fcr System- und Anwendungsentwicklung, werden in meiner Umgebung jedoch nur selten genutzt, z.\u202fB. f\u00fcr spezielle Performance- oder Kompatibilit\u00e4tsanforderungen.</li> </ul>"},{"location":"#testen-von-cms-funktionen-und-datenbanken","title":"Testen von CMS-Funktionen und Datenbanken","text":"<p>Ich teste regelm\u00e4\u00dfig neue Funktionen in den Content-Management-Systemen MediaWiki, Drupal, Typo3 und Orchard auf meinem Entwicklungsrechner. Dabei pr\u00fcfe ich gezielt die Kompatibilit\u00e4t und das Verhalten sowohl mit SQLite3 als auch mit PostgreSQL als Datenbank-Backend. Bisher traten dabei keine Probleme auf; beide Datenbanksysteme funktionieren zuverl\u00e4ssig mit den genannten CMS-L\u00f6sungen.</p> <p>Hinweis: Die Entwicklungsumgebung ist so konfiguriert, dass sie m\u00f6glichst nah an der Produktionsumgebung arbeitet, um Kompatibilit\u00e4tsprobleme zu vermeiden.Verwendete Technologien auf mein Entwicklungsrechner</p>"},{"location":"#dokumentation-und-veroffentlichung-mit-mediawiki-und-mkdocs","title":"Dokumentation und Ver\u00f6ffentlichung mit MediaWiki und MkDocs","text":""},{"location":"#mediawiki","title":"MediaWiki","text":"<p>F\u00fcr die interne Dokumentation wird MediaWiki auf dem Server betrieben. Die Installation erfolgt \u00fcber die offiziellen Pakete oder per Download von mediawiki.org. Nach der Grundinstallation werden folgende Schritte durchgef\u00fchrt:</p> <ol> <li>Konfiguration: <ul> <li>Datenbankzugangsdaten und Admin-Benutzer einrichten.</li> <li>Lokale Anpassungen in <code>LocalSettings.php</code> vornehmen (z.\u202fB. Sprache, Logo, Erweiterungen).</li> </ul> </li> <li>Erweiterungen: <ul> <li>Installation n\u00fctzlicher Extensions wie <code>VisualEditor</code>, <code>SyntaxHighlight_GeSHi</code> und <code>Cite</code>.</li> </ul> </li> <li>Backup: <ul> <li>Regelm\u00e4\u00dfige Sicherung der Datenbank und des <code>images</code>-Verzeichnisses mittels Cronjob.</li> </ul> </li> </ol> <p>Die Dokumentation wird direkt im Browser gepflegt. \u00c4nderungen sind sofort sichtbar und versioniert.</p>"},{"location":"#mkdocs","title":"MkDocs","text":"<p>F\u00fcr die statische Dokumentation und Ver\u00f6ffentlichung nach au\u00dfen wird MkDocs verwendet:</p> <ol> <li>Installation: <code>bash     pip install mkdocs mkdocs-material</code></li> <li>Projekt anlegen: <code>bash     mkdocs new mein-projekt     cd mein-projekt</code></li> <li>Bearbeitung: <ul> <li>Markdown-Dateien im <code>docs/</code>-Verzeichnis erstellen und anpassen.</li> <li><code>mkdocs.yml</code> f\u00fcr Navigation und Theme konfigurieren.</li> </ul> </li> <li>Bauen und Bereitstellen: <code>bash     mkdocs build     rsync -av site/ user@server:/var/www/html/docs/</code>     Alternativ kann MkDocs auch direkt auf dem Server laufen und per Nginx ausgeliefert werden.</li> </ol> <p>Hinweis: Sowohl MediaWiki als auch MkDocs werden regelm\u00e4\u00dfig aktualisiert. Die Dokumentation wird versioniert im Git-Repository gepflegt und automatisiert auf den Server \u00fcbertragen.</p>"},{"location":"Datenschutz/","title":"Datenschutz","text":"<p>Verantwortliche Stelle im Sinne der Datenschutzgesetze, insbesondere der EU-Datenschutzgrundverordnung (DSGVO), ist:</p> <ul> <li>Thorsten Kl\u00f6hn </li> <li>Gerhardstra\u00dfe 2 </li> <li>22926 Ahrensburg </li> <li>Telefon: 04102-2 17 40 07 </li> <li>e-Mail: thorstenkloehn@gmail.com</li> </ul>"},{"location":"Datenschutz/#ihre-betroffenenrechte","title":"Ihre Betroffenenrechte","text":"<p>Unter den angegebenen Kontaktdaten unseres Datenschutzbeauftragten k\u00f6nnen Sie jederzeit folgende Rechte aus\u00fcben:</p> <ul> <li>Auskunft \u00fcber Ihre bei uns gespeicherten Daten und deren     Verarbeitung (Art. 15 DSGVO),</li> <li>Berichtigung unrichtiger personenbezogener Daten (Art. 16 DSGVO),</li> <li>L\u00f6schung Ihrer bei uns gespeicherten Daten (Art. 17 DSGVO),</li> <li>Einschr\u00e4nkung der Datenverarbeitung, sofern wir Ihre Daten aufgrund     gesetzlicher Pflichten noch nicht l\u00f6schen d\u00fcrfen (Art. 18 DSGVO),</li> <li>Widerspruch gegen die Verarbeitung Ihrer Daten bei uns (Art. 21     DSGVO) und</li> <li>Daten\u00fcbertragbarkeit, sofern Sie in die Datenverarbeitung     eingewilligt haben oder einen Vertrag mit uns abgeschlossen haben     (Art. 20 DSGVO).</li> </ul> <p>Sofern Sie uns eine Einwilligung erteilt haben, k\u00f6nnen Sie diese jederzeit mit Wirkung f\u00fcr die Zukunft widerrufen.</p> <p>Sie k\u00f6nnen sich jederzeit mit einer Beschwerde an eine Aufsichtsbeh\u00f6rde wenden, z. B. an die zust\u00e4ndige Aufsichtsbeh\u00f6rde des Bundeslands Ihres Wohnsitzes oder an die f\u00fcr uns als verantwortliche Stelle zust\u00e4ndige Beh\u00f6rde.</p> <p>Eine Liste der Aufsichtsbeh\u00f6rden (f\u00fcr den nicht\u00f6ffentlichen Bereich) mit Anschrift finden Sie unter: .</p>"},{"location":"Datenschutz/#eingebettete-youtube-videos","title":"Eingebettete YouTube-Videos","text":""},{"location":"Datenschutz/#art-und-zweck-der-verarbeitung","title":"Art und Zweck der Verarbeitung:","text":"<p>Auf einigen unserer Webseiten betten wir YouTube-Videos ein. Betreiber der entsprechenden Plugins ist die YouTube, LLC, 901 Cherry Ave., San Bruno, CA 94066, USA (nachfolgend \u201eYouTube\u201c). Wenn Sie eine Seite mit dem YouTube-Plugin besuchen, wird eine Verbindung zu Servern von YouTube hergestellt. Dabei wird YouTube mitgeteilt, welche Seiten Sie besuchen. Wenn Sie in Ihrem YouTube-Account eingeloggt sind, kann YouTube Ihr Surfverhalten Ihnen pers\u00f6nlich zuzuordnen. Dies verhindern Sie, indem Sie sich vorher aus Ihrem YouTube-Account ausloggen.</p> <p>Wird ein YouTube-Video gestartet, setzt der Anbieter Cookies ein, die Hinweise \u00fcber das Nutzerverhalten sammeln.</p> <p>Weitere Informationen zu Zweck und Umfang der Datenerhebung und ihrer Verarbeitung durch YouTube erhalten Sie in den Datenschutzerkl\u00e4rungen des Anbieters, Dort erhalten Sie auch weitere Informationen zu Ihren diesbez\u00fcglichen Rechten und Einstellungsm\u00f6glichkeiten zum Schutze Ihrer Privatsph\u00e4re (). Google verarbeitet Ihre Daten in den USA und hat sich dem EU-US Privacy Shield unterworfen https://www.privacyshield.gov/EU-US-Framework</p>"},{"location":"Datenschutz/#rechtsgrundlage","title":"Rechtsgrundlage:","text":"<p>Rechtsgrundlage f\u00fcr die Einbindung von YouTube und dem damit verbundenen Datentransfer zu Google ist Ihre Einwilligung (Art. 6 Abs. 1 lit. a DSGVO).</p>"},{"location":"Datenschutz/#empfanger","title":"Empf\u00e4nger:","text":"<p>Der Aufruf von YouTube l\u00f6st automatisch eine Verbindung zu Google aus.</p>"},{"location":"Datenschutz/#speicherdauer-und-widerruf-der-einwilligung","title":"Speicherdauer und Widerruf der Einwilligung:","text":"<p>Wer das Speichern von Cookies f\u00fcr das Google-Ad-Programm deaktiviert hat, wird auch beim Anschauen von YouTube-Videos mit keinen solchen Cookies rechnen m\u00fcssen. YouTube legt aber auch in anderen Cookies nicht-personenbezogene Nutzungsinformationen ab. M\u00f6chten Sie dies verhindern, so m\u00fcssen Sie das Speichern von Cookies im Browser blockieren.</p> <p>Weitere Informationen zum Datenschutz bei \u201eYouTube\u201c finden Sie in der Datenschutzerkl\u00e4rung des Anbieters unter:</p>"},{"location":"Datenschutz/#drittlandtransfer","title":"Drittlandtransfer:","text":"<p>Google verarbeitet Ihre Daten in den USA und hat sich dem EU_US Privacy Shield unterworfen .</p>"},{"location":"Datenschutz/#bereitstellung-vorgeschrieben-oder-erforderlich","title":"Bereitstellung vorgeschrieben oder erforderlich:","text":"<p>Die Bereitstellung Ihrer personenbezogenen Daten erfolgt freiwillig, allein auf Basis Ihrer Einwilligung. Sofern Sie den Zugriff unterbinden, kann es hierdurch zu Funktionseinschr\u00e4nkungen auf der Website kommen.</p>"},{"location":"Datenschutz/#anderung-unserer-datenschutzbestimmungen","title":"\u00c4nderung unserer Datenschutzbestimmungen","text":"<p>Wir behalten uns vor, diese Datenschutzerkl\u00e4rung anzupassen, damit sie stets den aktuellen rechtlichen Anforderungen entspricht oder um \u00c4nderungen unserer Leistungen in der Datenschutzerkl\u00e4rung umzusetzen, z.B. bei der Einf\u00fchrung neuer Services. F\u00fcr Ihren erneuten Besuch gilt dann die neue Datenschutzerkl\u00e4rung.</p>"},{"location":"Datenschutz/#fragen-an-den-datenschutzbeauftragten","title":"Fragen an den Datenschutzbeauftragten","text":"<p>Wenn Sie Fragen zum Datenschutz haben, schreiben Sie uns bitte eine E-Mail oder wenden Sie sich direkt an die f\u00fcr den Datenschutz verantwortliche Person in unserer Organisation:</p> <p>Die Datenschutzerkl\u00e4rung wurde mit dem Datenschutzerkl\u00e4rungs-Generator der activeMind AG erstellt *(Version 2018-09-24).c</p>"},{"location":"Impressum/","title":"Impressum","text":"<p>Angaben gem\u00e4\u00df \u00a7 5 TMG</p> <ul> <li>Thorsten Kl\u00f6hn</li> <li>Gerhardstra\u00dfe 2</li> <li>22926 Ahrensburg</li> </ul>"},{"location":"Impressum/#vertreten-durch","title":"Vertreten durch:","text":"<p>Thorsten Kl\u00f6hn</p>"},{"location":"Impressum/#kontakt","title":"Kontakt:","text":"<ul> <li>Telefon: 04102-2 17 40 07\\</li> <li>E-Mail: thorstenkloehn@gmail.com</li> </ul>"},{"location":"Impressum/#haftungsausschluss","title":"Haftungsausschluss:","text":""},{"location":"Impressum/#haftung-fur-inhalte","title":"Haftung f\u00fcr Inhalte","text":"<p>Die Inhalte unserer Seiten wurden mit gr\u00f6\u00dfter Sorgfalt erstellt. F\u00fcr die Richtigkeit, Vollst\u00e4ndigkeit und Aktualit\u00e4t der Inhalte k\u00f6nnen wir jedoch keine Gew\u00e4hr \u00fcbernehmen. Als Diensteanbieter sind wir gem\u00e4\u00df \u00a7 7 Abs.1 TMG f\u00fcr eigene Inhalte auf diesen Seiten nach den allgemeinen Gesetzen verantwortlich. Nach \u00a7\u00a7 8 bis 10 TMG sind wir als Diensteanbieter jedoch nicht verpflichtet, \u00fcbermittelte oder gespeicherte fremde Informationen zu \u00fcberwachen oder nach Umst\u00e4nden zu forschen, die auf eine rechtswidrige T\u00e4tigkeit hinweisen. Verpflichtungen zur Entfernung oder Sperrung der Nutzung von Informationen nach den allgemeinen Gesetzen bleiben hiervon unber\u00fchrt. Eine diesbez\u00fcgliche Haftung ist jedoch erst ab dem Zeitpunkt der Kenntnis einer konkreten Rechtsverletzung m\u00f6glich. Bei Bekanntwerden von entsprechenden Rechtsverletzungen werden wir diese Inhalte umgehend entfernen.</p>"},{"location":"Impressum/#haftung-fur-links","title":"Haftung f\u00fcr Links","text":"<p>Unser Angebot enth\u00e4lt Links zu externen Webseiten Dritter, auf deren Inhalte wir keinen Einfluss haben. Deshalb k\u00f6nnen wir f\u00fcr diese fremden Inhalte auch keine Gew\u00e4hr \u00fcbernehmen. F\u00fcr die Inhalte der verlinkten Seiten ist stets der jeweilige Anbieter oder Betreiber der Seiten verantwortlich. Die verlinkten Seiten wurden zum Zeitpunkt der Verlinkung auf m\u00f6gliche Rechtsverst\u00f6\u00dfe \u00fcberpr\u00fcft. Rechtswidrige Inhalte waren zum Zeitpunkt der Verlinkung nicht erkennbar. Eine permanente inhaltliche Kontrolle der verlinkten Seiten ist jedoch ohne konkrete Anhaltspunkte einer Rechtsverletzung nicht zumutbar. Bei Bekanntwerden von Rechtsverletzungen werden wir derartige Links umgehend entfernen.\\</p>"},{"location":"Impressum/#urheberrecht","title":"Urheberrecht","text":"<p>Dieses Werk ist lizenziert unter einer Creative Commons Namensnennung 4.0 International Lizenz.Soweit die Inhalte auf dieser Seite nicht vom Betreiber erstellt wurden, werden die Urheberrechte Dritter beachtet. Insbesondere werden Inhalte Dritter als solche gekennzeichnet. Sollten Sie trotzdem auf eine Urheberrechtsverletzung aufmerksam werden, bitten wir um einen entsprechenden Hinweis. Bei Bekanntwerden von Rechtsverletzungen werden wir derartige Inhalte umgehend entfernen.</p>"},{"location":"Impressum/#datenschutz","title":"Datenschutz","text":"<p>Die Nutzung unserer Webseite ist in der Regel ohne Angabe personenbezogener Daten m\u00f6glich. Soweit auf unseren Seiten personenbezogene Daten (beispielsweise Name, Anschrift oder eMail-Adressen) erhoben werden, erfolgt dies, soweit m\u00f6glich, stets auf freiwilliger Basis. Diese Daten werden ohne Ihre ausdr\u00fcckliche Zustimmung nicht an Dritte weitergegeben. \\ Wir weisen darauf hin, dass die Daten\u00fcbertragung im Internet (z.B. bei der Kommunikation per E-Mail) Sicherheitsl\u00fccken aufweisen kann. Ein l\u00fcckenloser Schutz der Daten vor dem Zugriff durch Dritte ist nicht m\u00f6glich. Der Nutzung von im Rahmen der Impressumspflicht ver\u00f6ffentlichten Kontaktdaten durch Dritte zur \u00dcbersendung von nicht ausdr\u00fccklich angeforderter Werbung und Informationsmaterialien wird hiermit ausdr\u00fccklich widersprochen. Die Betreiber der Seiten behalten sich ausdr\u00fccklich rechtliche Schritte im Falle der unverlangten Zusendung von Werbeinformationen, etwa durch Spam-Mails, vor.\\</p> <p>Impressum vom Impressum Generator der [Kanzlei Hasselbach, Rechtsanw\u00e4lte f\u00fcr Arbeitsrecht und Familienrecht](https://www.kanzlei-hasselbach</p>"},{"location":"Archiv/ollama/","title":"Ollama","text":""},{"location":"Archiv/ollama/#ollama","title":"Ollama","text":"<p>Ollama ist ein Open-Source-Tool, das es erm\u00f6glicht, gro\u00dfe Sprachmodelle (LLMs) lokal auf einem Computer auszuf\u00fchren. Es ist eine Alternative zu Cloud-basierten LLMs wie GPT-3, die von Unternehmen wie OpenAI angeboten werden. Ollama erm\u00f6glicht es, LLMs auf einem Computer auszuf\u00fchren, ohne dass eine Internetverbindung erforderlich ist. Dies bedeutet, dass Benutzer die volle Kontrolle \u00fcber ihre Daten haben und keine Bedenken hinsichtlich Datenschutz und Sicherheit haben m\u00fcssen.</p>"},{"location":"Archiv/ollama/#installation","title":"Installation","text":"<p>Geben Sie den folgenden Befehl in die Konsole ein, um Ollama zu installieren:</p> <pre><code>curl -fsSL https://ollama.com/install.sh | sh\n</code></pre> <p>Geben Sie den folgenden Befehl ein, um Ollama zu starten Laden Sie das Modell herunter:</p> <pre><code>ollama pull llama3.2:latest\n</code></pre>"},{"location":"Archiv/ollama/#open-webui","title":"open-webui","text":"<p>open-webui ist ein Tool, das es erm\u00f6glicht, die Benutzeroberfl\u00e4che von Ollama im Webbrowser zu \u00f6ffnen.  Geben Sie den folgenden Befehl in die Konsole ein,</p> <pre><code>mkdir /testseite\ncd /testseite\npython3 -m venv .venv\nsource .venv/bin/activate\npip install open-webui\n</code></pre> <p>Geben Sie den folgenden Befehl ein, um die Benutzeroberfl\u00e4che von Ollama im Webbrowser zu \u00f6ffnen:</p> <pre><code>/testseite/.venv/bin/open-webui serve\nstr + c Programm beenden\n</code></pre>"},{"location":"Archiv/ollama/#systemctl-datei-erstellen","title":"systemctl Datei erstellen","text":"<p>Erstellen Sie eine Datei mit dem Namen ollama.service in /etc/systemd/system/ mit dem folgenden Inhalt:</p> <pre><code>\nsudo nano /etc/systemd/system/open-webui.service\n</code></pre> <p>F\u00fcgen Sie den folgenden Inhalt in die Datei ein:</p> <pre><code>[Unit]\nDescription=Open WebUI\nAfter=network.target\n\n[Service]\nType=simple\nUser=root\nWorkingDirectory=/testseite\nExecStart=/testseite/.venv/bin/open-webui serve\nRestart=on-failure\n\n[Install]\nWantedBy=multi-user.target\n</code></pre> <p>Geben Sie den folgenden Befehl ein, um den Dienst zu starten:</p> <pre><code>systemctl start open-webui\n</code></pre> <p>Geben Sie den folgenden Befehl ein, um den Dienst zu aktivieren:</p> <pre><code>systemctl enable open-webui\n</code></pre> <p>Geben Sie den folgenden Befehl ein, um den Status des Dienstes zu \u00fcberpr\u00fcfen:</p> <pre><code>systemctl status open-webui\n</code></pre>"},{"location":"Archiv/ollama/#certbot","title":"Certbot","text":"<p>Geben Sie den folgenden Befehl in die Konsole ein, um Certbot zu installieren:</p> <pre><code>sudo systemctl stop nginx\nsudo certbot certonly --standalone -d ai.ahrensburg.city\n</code></pre>"},{"location":"Archiv/ollama/#nginx-konfiguration","title":"nginx Konfiguration","text":"<p>Erstellen Sie eine Konfigurationsdatei mit dem Namen ollama in /etc/nginx/sites-available/ mit dem folgenden Inhalt:</p> <pre><code>sudo nano /etc/nginx/conf.d/ollama.conf\n</code></pre> <p>F\u00fcgen Sie den folgenden Inhalt in die Datei ein:</p> <pre><code>server {\n   listen 443 ssl http2;\n    listen [::]:443 ssl http2;\n    server_name ai.ahrensburg.city;\n    ssl_certificate /etc/letsencrypt/live/ai.ahrensburg.city/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/ai.ahrensburg.city/privkey.pem;\n    location / {\n        proxy_pass http://localhost:8080;\n        proxy_set_header Connection $http_connection;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n    }\n}\n</code></pre> <p>Geben Sie den folgenden Befehl ein, um den nginx-Dienst neu zu starten:</p> <pre><code>sudo systemctl restart nginx\n</code></pre>"},{"location":"CMS/Mediawiki/","title":"Installieren","text":""},{"location":"CMS/Mediawiki/#postgres-datenbank-erstellen","title":"Postgres Datenbank erstellen","text":"<pre><code>sudo -u postgres -i\ncreatedb -E UTF8 -O thorsten mediawiki\npsql -d mediawiki -c \"GRANT ALL PRIVILEGES ON DATABASE mediawiki TO thorsten\n\nexit\n</code></pre>"},{"location":"CMS/Mediawiki/#php-installieren","title":"PHP installieren","text":"<pre><code>sudo apt install php-fpm php-pgsql php-xml php-curl php-gd php-mbstring php-xmlrpc php-xmlrpc php-zip php-intl -y\n</code></pre>"},{"location":"CMS/Mediawiki/#mediawiki-installieren","title":"Mediawiki installieren","text":"<pre><code>cd /var/www\nsudo git clone https://gerrit.wikimedia.org/r/mediawiki/core.git mediawiki\nsudo cd mediawiki\nsudo git tag -l | sort -V\nsudo git checkout 1.41.0\nsudo git submodule update --init --recursive\nsudo chown -R www-data:www-data /var/www/mediawiki\nsudo chmod -R 755 /var/www/mediawiki\n\n</code></pre> <p>Hochladen der Konfiguration</p> <pre><code>sudo scp /home/thorsten/Downloads/LocalSettings.php thorsten@ahrensburg.city:/var/www/mediawiki/LocalSettings.php\n</code></pre>"},{"location":"CMS/Mediawiki/#lesbare-urls-konfiguriern-in-mediawiki","title":"Lesbare URLs konfiguriern in mediawiki","text":"<pre><code>sudo nano /var/www/mediawiki/LocalSettings.php\n</code></pre> <pre><code>$wgScriptPath = \"\";\n$wgArticlePath = \"/$1\";\n$wgUsePathInfo = true;\n\n</code></pre> <p>Erweiterung Registieren</p> <pre><code>sudo nano /var/www/mediawiki/LocalSettings.php\n</code></pre> <pre><code>\n$wgScriptPath = \"\";\n$wgArticlePath = \"/$1\";\n$wgUsePathInfo = true;\n\nwfLoadExtension( 'VisualEditor' );\n# Cookie-Warnung aktivieren\nwfLoadExtension( 'CookieWarning' );\nwfLoadExtension( 'SyntaxHighlight_GeSHi' );\n$wgCookieWarningEnabled=true;\n$wgCookieWarningMoreUrl='';\n$wgCookieWarningGeoIPServiceURL='';\n$wgCookieWarningGeoIPLookup='none';\n$wgCookieWarningForCountryCodes=\"EU\";\n\n\n\n\ndefine(\"NS_SCHWACHSTELLEN\", 3006);\ndefine(\"NS_SCHWACHSTELLEN_TALK\", 3007);\n$wgExtraNamespaces[NS_SCHWACHSTELLEN] = \"Schwachstellen\";\n$wgExtraNamespaces[NS_SCHWACHSTELLEN_TALK] = \"Schwachstellen Diskussion\";\n$wgNamespacesWithSubpages[NS_SCHWACHSTELLEN] = true;\n\n// VisualEditor f\u00fcr Schwachstellen-Namensraum aktivieren\n$wgVisualEditorAvailableNamespaces[NS_SCHWACHSTELLEN] = true;\n$wgVisualEditorAvailableNamespaces[NS_SCHWACHSTELLEN_TALK] = true;\n// Server-Namensraum\ndefine(\"NS_SERVER\", 3000);\ndefine(\"NS_SERVER_TALK\", 3001);\n$wgExtraNamespaces[NS_SERVER] = \"Server\";\n$wgExtraNamespaces[NS_SERVER_TALK] = \"Server Diskussion\";\n$wgNamespacesWithSubpages[NS_SERVER] = true;\n\n// Kurse-Namensraum\ndefine(\"NS_KURSE\", 3002);\ndefine(\"NS_KURSE_TALK\", 3003);\n$wgExtraNamespaces[NS_KURSE] = \"Kurse\";\n$wgExtraNamespaces[NS_KURSE_TALK] = \"Kurse Diskussion\";\n$wgNamespacesWithSubpages[NS_KURSE] = true;\n\n\n// AI-Namensraum\ndefine(\"NS_AI\", 3004);\ndefine(\"NS_AI_TALK\", 3005);\n$wgExtraNamespaces[NS_AI] = \"Ai\";\n$wgExtraNamespaces[NS_AI_TALK] = \"Ai Diskussion\";\n$wgNamespacesWithSubpages[NS_AI] = true;\n\n// VisualEditor f\u00fcr die neuen Namensr\u00e4ume aktivieren\n$wgVisualEditorAvailableNamespaces[NS_SERVER] = true;\n$wgVisualEditorAvailableNamespaces[NS_SERVER_TALK] = true;\n$wgVisualEditorAvailableNamespaces[NS_KURSE] = true;\n$wgVisualEditorAvailableNamespaces[NS_KURSE_TALK] = true;\n$wgVisualEditorAvailableNamespaces[NS_AI] = true;\n$wgVisualEditorAvailableNamespaces[NS_AI_TALK] = true;\n\ndefine(\"NS_IDE\", 3008);\ndefine(\"NS_IDE_TALK\", 3009);\n$wgExtraNamespaces[NS_IDE] = \"IDE\";\n$wgExtraNamespaces[NS_IDE_TALK] = \"IDE Diskussion\";\n$wgNamespacesWithSubpages[NS_IDE] = true;\n$wgVisualEditorAvailableNamespaces[NS_IDE] = true;\n$wgVisualEditorAvailableNamespaces[NS_IDE_TALK] = true;\ndefine(\"NS_BUILDER\", 3010);\ndefine(\"NS_BUILDER_TALK\", 3011);\n\n$wgExtraNamespaces[NS_BUILDER] = \"Builder\";\n$wgExtraNamespaces[NS_BUILDER_TALK] = \"Builder_Diskussion\";\n$wgVisualEditorAvailableNamespaces[] = NS_BUILDER;\ndefine(\"NS_BACKUP\", 3012);\ndefine(\"NS_BACKUP_TALK\", 3013);\n\n$wgExtraNamespaces[NS_BACKUP] = \"Backup\";\n$wgExtraNamespaces[NS_BACKUP_TALK] = \"Backup_Diskussion\";\n$wgVisualEditorAvailableNamespaces[] = NS_BACKUP;\n\n$wgExtraNamespaces[NS_Nachrichten] = \"Nachrichten\";\n$wgExtraNamespaces[NS_Nachrichten_TALK] = \"Nachrichten_Diskussion\";\n$wgVisualEditorAvailableNamespaces[] = NS_Nachrichten;\ndefine(\"NS_Nachrichten\", 3014);\ndefine(\"NS_Nachrichten_TALK\", 3015);\n\n\nphp maintenance/rebuildLocalisationCache.php\nphp maintenance/update.php \n</code></pre>"},{"location":"CMS/Mediawiki/Backup/","title":"Backup","text":""},{"location":"CMS/Mediawiki/Backup/#backup-erstellen","title":"Backup erstellen","text":"<pre><code>cd /home/thorsten\ngh repo clone thorstenkloehn/Download\nsudo chmod 777 -R Download\ncd /home/thorsten/Download\nsudo rm /home/thorsten/Download/pagedump.xml\nssh root@ahrensburg.city \"php /var/www/mediawiki/mediawiki/maintenance/dumpBackup.php --full\" &gt; /home/thorsten/Download/pagedump.xml\ngit add pagedump.xml\ngit commit -m \"Backup\"\ngit push\n</code></pre>"},{"location":"CMS/Mediawiki/Wiederherstellen/","title":"Wiedererstellen","text":"<pre><code># Repository klonen (ohne sudo, falls m\u00f6glich)\ngit clone https://github.com/thorstenkloehn/Download.git ~/Download\ncd ~/Download\n\n# MediaWiki-Dump importieren\nphp /var/www/mediawiki/maintenance/run.php importDump.php &lt; pagedump.xml\n</code></pre>"},{"location":"Datenerfassung/OpenDataKit/","title":"OpenDataKit","text":""},{"location":"Datenerfassung/OpenDataKit/#opendatakit","title":"OpenDataKit","text":"<p>OpenDataKit (ODK) ist eine freie Software zur Erhebung von Daten in Feldstudien. Die Software ist speziell f\u00fcr die Verwendung in Entwicklungsl\u00e4ndern konzipiert und erm\u00f6glicht die Erhebung von Daten auf mobilen Ger\u00e4ten. Die Daten k\u00f6nnen offline erfasst und sp\u00e4ter synchronisiert werden. ODK besteht aus einer Reihe von Tools, die es erm\u00f6glichen, Formulare zu erstellen, Daten zu erfassen und zu verwalten. Die Software ist in Java geschrieben und kann auf Android-Ger\u00e4ten ausgef\u00fchrt werden. ODK ist ein Open-Source-Projekt und wird von einer Community von Entwicklern und Nutzern unterst\u00fctzt. Die Software wird von verschiedenen Organisationen eingesetzt, um Daten in Feldstudien zu erheben, darunter Regierungen, NGOs und Forschungseinrichtungen. ODK ist eine flexible und anpassbare L\u00f6sung zur Erhebung von Daten in Feldstudien und bietet eine Vielzahl von Funktionen zur Unterst\u00fctzung verschiedener Datenerhebungsprojekte.    </p>"},{"location":"Datenerfassung/OpenDataKit/#androis-app-installieren","title":"Androis app installieren","text":"<p>Die  Collect App kann \u00fcber den Google Play Store oder \u00fcber die ODK-Website heruntergeladen und installiert werden. Die App ist kostenlos und Open Source. Nach der Installation kann die App gestartet und konfiguriert werden.</p>"},{"location":"IDE/","title":"Entwicklungsumgebung unter Ubuntu einrichten","text":""},{"location":"IDE/#system-aktualisieren","title":"System aktualisieren","text":"<p>\u00d6ffnen Sie das Terminal und f\u00fchren Sie folgende Befehle aus, um Ihr System zu aktualisieren:</p> <pre><code>sudo apt-get update\nsudo apt-get upgrade\nsudo apt install libsecret-1-0 libsecret-tools libsecret-1-dev libglib2.0-dev\n</code></pre>"},{"location":"IDE/#google-chrome-installieren","title":"Google Chrome installieren","text":"<pre><code>wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb\nsudo dpkg -i google-chrome-stable_current_amd64.deb\n</code></pre>"},{"location":"IDE/#git-installieren-und-konfigurieren","title":"Git installieren und konfigurieren","text":"<pre><code>sudo apt-get install git gh\ngit config --global user.email \"you@example.com\"\ngit config --global user.name \"Your Name\"\n</code></pre>"},{"location":"IDE/#github-cli-gh-konfigurieren","title":"GitHub CLI (gh) konfigurieren","text":"<pre><code>gh auth login\n</code></pre>"},{"location":"IDE/#nodejs-installieren","title":"Node.js installieren","text":"<pre><code>sudo apt-get install curl\ncurl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.40.1/install.sh | bash\nsource ~/.bashrc\nnvm install 22\nnode -v    # Sollte \"v22.12.0\" ausgeben\nnvm current # Sollte \"v22.12.0\" ausgeben\nnpm -v     # Sollte \"10.9.0\" ausgeben\n</code></pre>"},{"location":"IDE/#visual-studio-code-und-neovim-installieren","title":"Visual Studio Code und Neovim installieren","text":"<pre><code>sudo snap install code --classic\nsudo apt-get install neovim\n</code></pre>"},{"location":"IDE/#wichtige-vs-code-erweiterungen-installieren","title":"Wichtige VS Code Erweiterungen installieren","text":"<pre><code>code --install-extension GitHub.copilot\ncode --install-extension RoweWilsonFrederiskHolme.wikitext\ncode --install-extension ms-windows-ai-studio.windows-ai-studio\n</code></pre>"},{"location":"IDE/#datenbank-postgresql-und-postgis","title":"Datenbank: PostgreSQL und PostGIS","text":""},{"location":"IDE/#postgresql-installieren-und-benutzer-einrichten","title":"PostgreSQL installieren und Benutzer einrichten","text":"<pre><code>sudo apt-get install postgresql-all\nsudo -u postgres -i\ncreateuser thorsten\ncreatedb -E UTF8 -O thorsten thorsten\npsql -c \"\\password thorsten\"\npsql -c \"ALTER USER dein_benutzername CREATEDB;\"\nexit\n</code></pre>"},{"location":"IDE/#postgresql-version-anzeigen","title":"PostgreSQL Version anzeigen","text":"<pre><code>psql --version\n</code></pre>"},{"location":"IDE/#postgis-installation-ubuntu-2304","title":"PostGIS Installation (Ubuntu 23.04)","text":"<pre><code>sudo apt-get install postgis postgresql-16-postgis-3\nsudo -u postgres -i\npsql -d thorsten -c \"CREATE EXTENSION postgis;\"\npsql -d thorsten -c \"CREATE EXTENSION postgis_topology;\"\nexit\n</code></pre>"},{"location":"IDE/#c-und-c-entwicklungsumgebung","title":"C und C++ Entwicklungsumgebung","text":"<pre><code>sudo apt install curl\nsudo apt install build-essential\ncode --install-extension ms-vscode.cpptools-extension-pack\nsudo apt-get install cmake\nsudo apt-get install gdb\n</code></pre>"},{"location":"IDE/#python-installieren","title":"Python installieren","text":"<pre><code>sudo apt install python3 python3-pip python3-venv python-is-python3\ncode --install-extension ms-python.python\n</code></pre>"},{"location":"IDE/#rust-installieren","title":"Rust installieren","text":"<pre><code>curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh\ncode --install-extension rust-lang.rust-analyzer\n</code></pre>"},{"location":"IDE/#go-golang-installieren","title":"Go (Golang) installieren","text":"<pre><code>cd $HOME\nwget https://go.dev/dl/go1.25.5.linux-amd64.tar.gz\nsudo tar -C /usr/local -xzf go1.25.5.linux-amd64.tar.gz\necho 'export PATH=$PATH:/usr/local/go/bin' &gt;&gt; ~/.bashrc\necho 'export GOPATH=$HOME/go' &gt;&gt; ~/.bashrc\necho 'export PATH=$PATH:$GOPATH/bin' &gt;&gt; ~/.bashrc\nsource ~/.bashrc\n</code></pre>"},{"location":"IDE/#net-installieren-und-konfigurieren","title":".NET installieren und konfigurieren","text":"<pre><code>sudo apt-get update\nsudo apt-get install -y dotnet-sdk-10.0\nsudo apt-get install -y dotnet-sdk-9.0\nsudo apt-get install -y dotnet-sdk-8.0\ndotnet tool install --global dotnet-ef\ndotnet tool install --global dotnet-aspnet-codegenerator\ndotnet tool install -g Microsoft.Web.LibraryManager.Cli\necho 'export PATH=$HOME/.dotnet/tools:$PATH' &gt;&gt; ~/.bashrc\nsource ~/.bashrc\ncode --install-extension ms-dotnettools.csdevkit\ndotnet new install OrchardCore.ProjectTemplates::2.2.1\n</code></pre>"},{"location":"IDE/#php-installieren","title":"PHP installieren","text":"<pre><code>sudo apt install php-fpm php-pgsql php-xml php-curl php-gd php-mbstring php-xmlrpc php-zip php-intl php-json php-cli php-common php-apcu php-bcmath php-soap php-ldap php-imagick php-zip php-gmp -y\n</code></pre>"},{"location":"IDE/#composer-installieren","title":"Composer installieren","text":"<pre><code>php -r \"copy('https://getcomposer.org/installer', 'composer-setup.php');\"\nphp composer-setup.php\nphp -r \"unlink('composer-setup.php');\"\nsudo mv composer.phar /usr/local/bin/composer\n</code></pre>"},{"location":"IDE/#nginx-installieren","title":"nginx installieren","text":"<pre><code>sudo apt-get install nginx\nsudo rm /etc/nginx/sites-enabled/default\n</code></pre>"},{"location":"IDE/#java-und-entwicklungswerkzeuge-installieren","title":"Java und Entwicklungswerkzeuge installieren","text":"<pre><code>sudo apt install openjdk-26-jdk\nsudo apt install maven\ncode --install-extension vscjava.vscode-java-pack\ncode --install-extension vmware.vscode-boot-dev-pack\n\n</code></pre>"},{"location":"Server/Apache_Nginx/","title":"Apache-Server mit Nginx verbinden","text":""},{"location":"Server/Apache_Nginx/#apache-auf-port-8080-betreiben-statt-80","title":"Apache auf Port 8080 betreiben (statt 80)","text":"<p>Diese Anleitung beschreibt, wie der Apache-Webserver auf Port 8080 statt dem Standard-Port 80 betrieben wird. Dies ist z.B. sinnvoll, wenn ein anderer Dienst (wie Nginx oder ein Reverse Proxy) Port 80 belegt oder Sie Apache absichern m\u00f6chten.</p>"},{"location":"Server/Apache_Nginx/#schritt-1-apache-port-andern","title":"Schritt 1: Apache-Port \u00e4ndern","text":"<p>\u00d6ffne die Datei <code>/etc/apache2/ports.conf</code>:</p> <pre><code>sudo nano /etc/apache2/ports.conf\n</code></pre> <p>F\u00fcge (oder \u00e4ndere) folgende Zeile:</p> <pre><code>Listen 8080\n</code></pre>"},{"location":"Server/Apache_Nginx/#fur-ubuntu-2004-vhost-anpassen","title":"F\u00fcr Ubuntu 20.04: VHost anpassen","text":"<p>\u00d6ffne die Datei <code>/etc/apache2/sites-available/000-default.conf</code> und passe den VirtualHost an:</p> <pre><code>sudo nano /etc/apache2/sites-available/000-default.conf\n</code></pre> <p>\u00c4ndere die Zeile zu:</p> <pre><code>&lt;VirtualHost *:8080&gt;\n</code></pre>"},{"location":"Server/Apache_Nginx/#fur-ubuntu-22042404-und-neuer","title":"F\u00fcr Ubuntu 22.04/24.04 und neuer","text":"<p>Meist reicht es, nur die <code>ports.conf</code> zu \u00e4ndern. Pr\u00fcfe aber, ob in den VHost-Dateien noch explizit auf Port 80 verwiesen wird.</p>"},{"location":"Server/Apache_Nginx/#schritt-2-apache-neu-starten","title":"Schritt 2: Apache neu starten","text":"<pre><code>sudo systemctl restart apache2\n</code></pre>"},{"location":"Server/Apache_Nginx/#schritt-3-firewall-anpassen-falls-aktiv","title":"Schritt 3: Firewall anpassen (falls aktiv)","text":"<p>Erlaube Port 8080:</p> <pre><code>sudo ufw allow 8080/tcp\n</code></pre>"},{"location":"Server/Apache_Nginx/#hinweise","title":"Hinweise","text":"<ul> <li>Nach der Umstellung ist Apache unter http://:8080 erreichbar. <li>Pr\u00fcfe, ob andere Dienste Port 80 nutzen (z.B. Nginx, Certbot, etc.).</li>"},{"location":"Server/Apache_Nginx/#nginx-als-reverse-proxy-vor-apache-optional","title":"Nginx als Reverse Proxy vor Apache (optional)","text":"<p>Wenn du m\u00f6chtest, dass Anfragen an Port 80 (und ggf. 443) von Nginx entgegengenommen und an Apache auf Port 8080 weitergeleitet werden, kannst du Nginx als Reverse Proxy konfigurieren:</p>"},{"location":"Server/Apache_Nginx/#beispiel-konfiguration-fur-etcnginxsites-availabledefault","title":"Beispiel-Konfiguration f\u00fcr <code>/etc/nginx/sites-available/default</code>:","text":"<pre><code>server {\n    listen 80;\n    server_name _;\n\n    location / {\n        proxy_pass http://127.0.0.1:8080;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n    }\n}\n</code></pre> <p>Danach Nginx neu starten:</p> <pre><code>sudo systemctl restart nginx\n</code></pre>"},{"location":"Server/Apache_Nginx/#ssl-mit-lets-encrypt-certbot","title":"SSL mit Let's Encrypt (Certbot)","text":"<p>Wenn du HTTPS nutzen m\u00f6chtest, kannst du Certbot verwenden. Beispiel f\u00fcr Nginx:</p> <pre><code>sudo snap install --classic certbot\nsudo ln -s /snap/bin/certbot /usr/bin/certbot\nsudo certbot --nginx\n</code></pre> <p>Folge den Anweisungen, um ein Zertifikat zu erhalten.</p>"},{"location":"Server/Apache_Nginx/#fehlerbehebung","title":"Fehlerbehebung","text":"<ul> <li>Pr\u00fcfe mit <code>sudo netstat -tulpen | grep 80</code>, ob Port 80 noch von einem anderen Dienst belegt ist.</li> <li>Apache-Logs findest du unter <code>/var/log/apache2/</code>.</li> <li>Nginx-Logs unter <code>/var/log/nginx/</code>.</li> </ul>"},{"location":"Server/Apache_Nginx/#kachelserver-mit-apache-server-port-80-auf-8080-umleiten","title":"Kachelserver mit Apache-Server Port 80 auf 8080 umleiten","text":""},{"location":"Server/Apache_Nginx/#mit-ubuntu-2004-lts","title":"Mit Ubuntu 20.04 LTS","text":"<p>Geben Sie den folgenden Befehl ein, um den Apache-Server zu installieren:</p> <pre><code>sudo nano /etc/apache2/ports.conf\n</code></pre> <p>F\u00fcgen Sie die folgende Zeile hinzu, um den Port 80 auf den Port 8080 umzuleiten:</p> <pre><code>Listen 8080\n</code></pre> <p>Speichern Sie die Datei.</p> <p>Geben Sie den folgenden Befehl ein, um den Apache-Server zu installieren:</p> <pre><code>sudo nano /etc/apache2/sites-available/000-default.conf\n</code></pre> <p>F\u00fcgen Sie die folgende Zeile hinzu, um den Port 80 auf den Port 8080 umzuleiten:</p> <pre><code>&lt;VirtualHost *:8080&gt;\n</code></pre> <p>Speichern Sie die Datei.</p> <p>Geben Sie den folgenden Befehl ein, um den Apache-Server zu installieren:</p> <pre><code>sudo systemctl restart apache2\n</code></pre> <p>Der Apache-Server leitet jetzt den Port 80 auf den Port 8080 um.</p>"},{"location":"Server/Apache_Nginx/#mit-ubuntu-2204-lts-oder-hoher","title":"Mit Ubuntu 22.04 LTS oder h\u00f6her","text":"<p>Brauchen Sie nicht /etc/apache2/sites-available/000-default.conf \u00e4ndern, nur /etc/apache2/ports.conf \u00e4ndern. Geben Sie den folgenden Befehl ein, um den Apache-Server zu installieren:</p> <pre><code>sudo nano /etc/apache2/ports.conf\n</code></pre> <p>F\u00fcgen Sie die folgende Zeile hinzu, um den Port 80 auf den Port 8080 umzuleiten:</p> <pre><code>Listen 8080\n</code></pre> <p>Speichern Sie die Datei.</p> <p>Geben Sie den folgenden Befehl ein, um den Apache-Server zu installieren:</p> <pre><code>sudo systemctl restart apache2\n</code></pre>"},{"location":"Server/Forgejo/","title":"Forgejo","text":"<p>hallo</p>"},{"location":"Server/Nginx_SSL/","title":"Nginx SSL Zertifikat","text":""},{"location":"Server/Nginx_SSL/#nginx-mit-ssl-zertifikat-einrichten-auf-ubuntu-2004-lts-oder-hoher","title":"Nginx mit SSL-Zertifikat einrichten auf Ubuntu 20.04 LTS oder h\u00f6her","text":"<pre><code>sudo apt install snapd\nsudo apt-get install nginx\nsudo rm /etc/nginx/sites-enabled/default\nsudo systemctl stop nginx\nsudo snap install --classic certbot\nsudo ln -s /snap/bin/certbot /usr/bin/certbot\nsudo systemctl stop nginx\nsudo certbot certonly --manual --preferred-challenges dns \\\n  -d *.ahrensburg.city -d ahrensburg.city\n</code></pre>"},{"location":"Server/Nginx_SSL/#dns-txt-record-fur-domain-verifizierung-anlegen","title":"DNS TXT-Record f\u00fcr Domain-Verifizierung anlegen","text":"<ol> <li> <p>Melden Sie sich bei Ihrem DNS-Provider an.     \u00d6ffnen Sie die Verwaltungsoberfl\u00e4che f\u00fcr Ihre Domain (z.B. bei Ihrem Hoster oder Domain-Registrar).</p> </li> <li> <p>Navigieren Sie zum Bereich f\u00fcr DNS-Einstellungen.     Suchen Sie nach der M\u00f6glichkeit, DNS-Records zu bearbeiten oder hinzuzuf\u00fcgen.</p> </li> <li> <p>F\u00fcgen Sie einen neuen TXT-Record hinzu:</p> <ul> <li>Name/Host: Geben Sie den von Certbot angezeigten Wert ein (z.B. <code>_acme-challenge</code> oder <code>_acme-challenge.ahrensburg.city</code>).</li> <li>Typ: W\u00e4hlen Sie <code>TXT</code>.</li> <li>Wert: Kopieren Sie den von Certbot bereitgestellten Schl\u00fcssel (eine zuf\u00e4llige Zeichenkette).</li> </ul> </li> <li> <p>Speichern Sie den neuen TXT-Record.     Die \u00c4nderung kann einige Minuten bis zu mehreren Stunden dauern, bis sie weltweit wirksam ist.</p> </li> <li> <p>Fahren Sie mit Certbot fort, sobald der Record aktiv ist.     Sie k\u00f6nnen die Ausbreitung des TXT-Records mit Tools wie dig oder whatsmydns.net \u00fcberpr\u00fcfen.</p> </li> </ol> <p>Beispiel f\u00fcr einen TXT-Record: | Name/Host                       | Typ | Wert                        | |----------------------------------|-----|-----------------------------| | _acme-challenge.ahrensburg.city  | TXT | <code>xxxxxxxxxxxxxxxxxxxxxxxx</code>   |</p> <p>Hinweis: Jeder Zertifikatsantrag erzeugt einen neuen Wert f\u00fcr den TXT-Record. Wiederholen Sie die Schritte bei jeder neuen Verifizierung.</p>"},{"location":"Server/Nginx_SSL/#vorteile-eines-wildcard-ssl-zertifikats","title":"Vorteile eines Wildcard-SSL-Zertifikats","text":"<ul> <li>Schutz aller Subdomains: Ein Wildcard-Zertifikat sichert die Hauptdomain sowie beliebig viele Subdomains (z.B. <code>mail.ahrensburg.city</code>, <code>blog.ahrensburg.city</code>) mit nur einem Zertifikat ab.</li> <li>Einfachere Verwaltung: Es muss nur ein Zertifikat ausgestellt, installiert und erneuert werden, unabh\u00e4ngig von der Anzahl der Subdomains.</li> <li>Kosteneffizienz: Im Vergleich zu Einzelzertifikaten f\u00fcr jede Subdomain ist ein Wildcard-Zertifikat meist g\u00fcnstiger und reduziert den administrativen Aufwand.</li> <li>Zukunftssicherheit: Neue Subdomains k\u00f6nnen jederzeit hinzugef\u00fcgt und automatisch durch das bestehende Zertifikat gesch\u00fctzt werden, ohne ein neues Zertifikat beantragen zu m\u00fcssen.</li> </ul>"},{"location":"Server/Postgresql/","title":"Postgresql","text":"<p><code>postgresql-all</code> ist ein Metapaket, das alle verf\u00fcgbaren PostgreSQL-Versionen und zugeh\u00f6rige Komponenten installiert. Es eignet sich, wenn Sie mehrere Versionen oder eine vollst\u00e4ndige Entwicklungsumgebung ben\u00f6tigen. F\u00fcr die meisten Anwendungsf\u00e4lle reicht das Paket <code>postgresql</code>, das nur die aktuelle Standardversion installiert.</p> <pre><code>sudo apt-get install postgresql-all\nsudo -u postgres -i\ncreateuser thorsten\ncreatedb -E UTF8 -O thorsten thorsten\npsql -c \"\\password thorsten\"\npsql -c \"ALTER USER dein_benutzername CREATEDB;\"\nexit # Ausloggen\n\n</code></pre>"},{"location":"Server/Software/","title":"Weiter Software","text":""},{"location":"Server/Software/#net-installieren","title":".NET installieren","text":"<pre><code># Installiert notwendige Tools f\u00fcr Repositories\nsudo apt install software-properties-common\n\n# F\u00fcgt das .NET Backports-Repository hinzu, um verschiedene .NET-Versionen zu erhalten\nsudo add-apt-repository ppa:dotnet/backports\n\n# Aktualisiert die Paketquellen\nsudo apt-get update\n\n# Installiert mehrere Versionen der ASP.NET Core Runtime f\u00fcr parallele Anwendungskompatibilit\u00e4t\nsudo apt-get install -y aspnetcore-runtime-10.0\nsudo apt-get install -y aspnetcore-runtime-9.0\nsudo apt-get install -y aspnetcore-runtime-8.0\n</code></pre>"},{"location":"Server/Software/#java-installieren","title":"Java installieren","text":"<pre><code># Aktualisiert die Paketquellen\nsudo apt update\n\n# Installiert eine aktuelle, schlanke Java-Laufzeitumgebung ohne grafische Komponenten\nsudo apt install openjdk-21-jre-headless\n\n# \u00dcberpr\u00fcft die installierte Java-Version\njava -version\n</code></pre>"},{"location":"Server/Software/#python-installieren","title":"Python installieren","text":"<pre><code># Installiert Python 3, pip, venv und setzt 'python' auf Python 3\nsudo apt install python3 python3-pip python3-venv python-is-python3\n</code></pre>"},{"location":"Server/Software/#php-installieren","title":"PHP installieren","text":"<pre><code># Installiert PHP-FPM und zahlreiche Module f\u00fcr Webanwendungen, Datenbanken, Bildbearbeitung, Caching, etc.\nsudo apt install php-fpm php-pgsql php-xml php-curl php-gd php-mbstring php-xmlrpc php-zip php-intl php-json php-cli php-common php-apcu php-bcmath php-soap php-ldap php-imagick php-zip php-gmp -y\n</code></pre>"},{"location":"Server/nginx/","title":"Nginx Einstellung","text":"<pre><code>sudo nano /etc/nginx/conf.d/start.conf\n</code></pre> <pre><code>server {\n    listen 443 ssl http2;\n    listen [::]:443 ssl http2;\n    server_name ahrensburg.city;\n    ssl_certificate /etc/letsencrypt/live/ahrensburg.city/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/ahrensburg.city/privkey.pem;\n     root /var/www/mediawiki;\n    index index.php index.html index.htm;\n   location /hot {\n        proxy_pass http://localhost:8080/hot;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n    }\n\nlocation /karte {\n    alias /var/www/karte;\n    autoindex on;\n}\n location / {\n        try_files $uri $uri/ /index.php?$args;\n    }\n    location ~ \\.php$ {\n        include snippets/fastcgi-php.conf;\n        fastcgi_pass unix:/var/run/php/php8.3-fpm.sock;\n    }\n\n    location ~ /\\.ht {\n\n           deny all;\n    }\n\n}\nserver {\n    listen 80;\n    listen [::]:80;\n    server_name ahrensburg.city;\n    return 301 https://$host$request_uri;\n}\n</code></pre>"},{"location":"Server/Kachelserver/Server204/","title":"Ubuntu 20.04","text":"<p>Diese Seite beschreibt, wie man alle notwendige Software installiert, einrichtet und konfiguriert, um einen eigenen Kachelserver zu betreiben. Diese Schritt-f\u00fcr-Schritt-Anleitung wurde f\u00fcr Ubuntu Linux 20.04 LTS (Focal Fossa) geschrieben und im Mai 2020 getestet.</p>"},{"location":"Server/Kachelserver/Server204/#software-installation","title":"Software installation","text":"<p>Der OSM-Kachelserver-Stack ist eine Sammlung von Programmen und Bibliotheken, die zusammenarbeiten, um einen Kachelserver zu erstellen. Wie so oft bei OpenStreetMap gibt es viele Wege, dieses Ziel zu erreichen, und fast alle Komponenten haben Alternativen, die verschiedene spezifische Vor- und Nachteile haben. Dieses Tutorial beschreibt die g\u00e4ngigste Version, die der auf den Haupt-Kachelservern von OpenStreetMap.org \u00e4hnlich ist.</p> <p>Er besteht aus 5 Hauptkomponenten: mod_tile, renderd, mapnik, osm2pgsql und einer PostgreSQL/PostGIS-Datenbank. Mod_tile ist ein Apache-Modul, das zwischengespeicherte Kacheln bereitstellt und entscheidet, welche Kacheln neu gerendert werden m\u00fcssen - entweder weil sie noch nicht zwischengespeichert sind oder weil sie veraltet sind. Renderd bietet ein Priorit\u00e4tswarteschlangensystem f\u00fcr verschiedene Arten von Anfragen, um die Last von Renderanfragen zu verwalten und auszugleichen. Mapnik ist die Softwarebibliothek, die das eigentliche Rendern durchf\u00fchrt und von renderd verwendet wird.</p> <p>Beachten Sie, dass diese Anweisungen gegen einen neu installierten Ubuntu 20.04 Server geschrieben und getestet wurden. Wenn Sie bereits andere Versionen einiger Software installiert haben (vielleicht haben Sie von einer fr\u00fcheren Ubuntu-Version aktualisiert, oder Sie haben einige PPAs zum Laden eingerichtet), dann m\u00fcssen Sie m\u00f6glicherweise einige Anpassungen vornehmen.</p> <p>Dieser Leitfaden geht davon aus, dass Sie alles von einem Nicht-Root-Benutzer \u00fcber \"sudo\" ausf\u00fchren. Der standardm\u00e4\u00dfig verwendete Nicht-Root-Benutzername ist unten \"renderaccount\" - Sie k\u00f6nnen diesen lokal erstellen, wenn Sie m\u00f6chten, oder Skripte bearbeiten, um auf einen anderen Benutzernamen zu verweisen, wenn Sie m\u00f6chten. Wenn Sie den Benutzer \"renderaccount\" erstellen, m\u00fcssen Sie ihn zur Gruppe der Benutzer hinzuf\u00fcgen, die zu Root sudo k\u00f6nnen. Von Ihrem normalen Nicht-Root-Benutzerkonto aus:</p>"},{"location":"Server/Kachelserver/Server204/#ganze-neue-postgrs-datenbank","title":"Ganze Neue Postgrs Datenbank","text":"<pre><code>sudo apt install -y postgresql-common\nsudo /usr/share/postgresql-common/pgdg/apt.postgresql.org.sh\nsudo apt update\n</code></pre> <pre><code>sudo -i\nsudo adduser renderaccount\nusermod -aG sudo renderaccount\nexit\nexit\nssh renderaccount@yourserver\nsudo apt-get update \nsudo apt-get upgrade\nsudo apt-get install curl\n</code></pre>"},{"location":"Server/Kachelserver/Server204/#nodejs-installation","title":"Nodejs Installation","text":"<ul> <li>Anleitung</li> </ul> <p>Um diese Komponenten zu erstellen, m\u00fcssen zun\u00e4chst eine Vielzahl von Abh\u00e4ngigkeiten installiert werden:</p> <pre><code>sudo apt install libboost-all-dev git tar unzip wget bzip2 build-essential autoconf libtool libxml2-dev libgeos-dev libgeos++-dev libpq-dev libbz2-dev libproj-dev munin-node munin protobuf-c-compiler libfreetype6-dev libtiff5-dev libicu-dev libgdal-dev libcairo2-dev libcairomm-1.0-dev apache2 apache2-dev libagg-dev liblua5.2-dev ttf-unifont lua5.1 liblua5.1-0-dev\n</code></pre> <p>Stimmen Sie der Installation zu. Dies wird eine Weile dauern, also gehen Sie und trinken Sie eine Tasse Tee. Diese Liste enth\u00e4lt verschiedene Dienstprogramme und Bibliotheken, den Apache-Webserver und \"carto\", das zur Umwandlung von Carto-CSS-Stylesheets in ein Format verwendet wird, das der Kartenrenderer \"mapnik\" verstehen kann. Wenn das abgeschlossen ist, installieren Sie die zweite Reihe von Voraussetzungen:</p>"},{"location":"Server/Kachelserver/Server204/#installation-von-postgresql-postgis","title":"Installation von PostgreSQL / PostGIS","text":"<p>Auf Ubuntu gibt es vorgepackte Versionen von sowohl PostGIS als auch PostgreSQL, diese k\u00f6nnen einfach \u00fcber den Ubuntu-Paketmanager installiert werden.</p> <pre><code>\nsudo apt install postgresql-16 postgresql-client-16 postgresql-contrib postgis postgresql-16-postgis-3 postgresql-16-postgis-3-scripts osmosis\n\n</code></pre> <p>Hier ist \"postgresql\" die Datenbank, in der wir Kartendaten speichern, und \"postgis\" f\u00fcgt ihr zus\u00e4tzliche grafische Unterst\u00fctzung hinzu. Stimmen Sie erneut zu, um die Installation durchzuf\u00fchren.</p> <p>Jetzt m\u00fcssen Sie eine PostGIS-Datenbank erstellen. Die Standardwerte verschiedener Programme gehen davon aus, dass die Datenbank \"gis\" hei\u00dft und wir werden in diesem Tutorial die gleiche Konvention verwenden, obwohl dies nicht notwendig ist. Ersetzen Sie Ihren Benutzernamen durch \"renderaccount\", wo er unten verwendet wird. Dies sollte der Benutzername sein, der Karten mit Mapnik rendert.</p> <pre><code>sudo -u postgres -i\ncreateuser renderaccount # answer yes for superuser (although this isn't strictly necessary)\ncreatedb -E UTF8 -O renderaccount gis\npsql\n\\c gis\nCREATE EXTENSION postgis;\nCREATE EXTENSION hstore;\nALTER TABLE geometry_columns OWNER TO renderaccount;\nALTER TABLE spatial_ref_sys OWNER TO renderaccount;\n\\q\nexit\n</code></pre>"},{"location":"Server/Kachelserver/Server204/#installation-von-osm2pgsql-und-osmosis","title":"Installation von osm2pgsql und osmosis","text":"<pre><code>sudo apt-get install osm2pgsql osmosis\n</code></pre>"},{"location":"Server/Kachelserver/Server204/#installation-von-mapnik","title":"Installation von Mapnik","text":"<pre><code>sudo apt install autoconf apache2-dev libtool libxml2-dev libbz2-dev libgeos-dev libgeos++-dev libproj-dev gdal-bin libmapnik-dev mapnik-utils python3-mapnik python3-psycopg2 python3-yaml\n\n</code></pre>"},{"location":"Server/Kachelserver/Server204/#installation-von-mod_tile-und-renderd","title":"Installation von mod_tile und renderd","text":"<p>Als n\u00e4chstes installieren wir mod_tile und renderd. \"mod_tile\" ist ein Apache-Modul, das Anfragen nach Kacheln bearbeitet; \"renderd\" ist ein Daemon, der tats\u00e4chlich Kacheln rendert, wenn \"mod_tile\" sie anfordert. Wir verwenden den \"switch2osm\"-Zweig von https://github.com/SomeoneElseOSM/mod_tile, der selbst von https://github.com/openstreetmap/mod_tile abgezweigt ist, aber so modifiziert wurde, dass er Ubuntu 20.04 unterst\u00fctzt, und mit ein paar anderen \u00c4nderungen, um auf einem Standard-Ubuntu-Server zu arbeiten, anstatt auf einem der OSM-Rendering-Server.</p>"},{"location":"Server/Kachelserver/Server204/#kompilieren-sie-den-mod_tile-quellcode","title":"Kompilieren Sie den mod_tile-Quellcode:","text":"<pre><code>mkdir ~/src\ncd ~/src\ngit clone -b switch2osm https://github.com/SomeoneElseOSM/mod_tile.git\ncd mod_tile\n./autogen.sh\n</code></pre> <p>(Das sollte mit \"autoreconf: Verlassen des Verzeichnisses '.'\" enden.)</p> <pre><code>./configure\n</code></pre> <p>(Das sollte mit \"config.status: erstelle Makefile\" enden.)</p> <pre><code>make\n</code></pre> <p>Beachten Sie, dass hier einige \"beunruhigende\" Nachrichten \u00fcber den Bildschirm scrollen werden. Es sollte jedoch mit \"make[1]: Verlassen des Verzeichnisses '/home/renderaccount/src/mod_tile'\" enden.</p> <pre><code>sudo make install\n</code></pre> <p>(Das sollte mit \"make[1]: Verlassen des Verzeichnisses '/home/renderaccount/src/mod_tile'\" enden.)</p> <pre><code>sudo make install-mod_tile\n</code></pre> <p>(Das sollte mit \"chmod 644 /usr/lib/apache2/modules/mod_tile.so\" enden.)</p> <pre><code>sudo ldconfig\n</code></pre> <p>(das sollte nichts zur\u00fcckgeben)</p>"},{"location":"Server/Kachelserver/Server204/#konfiguration-des-stylesheets","title":"Konfiguration des Stylesheets","text":"<p>Jetzt, da alle notwendige Software installiert ist, m\u00fcssen Sie ein Stylesheet herunterladen und konfigurieren.</p> <p>Der Stil, den wir hier verwenden, ist derjenige, der von der \"Standard\"-Karte auf der openstreetmap.org-Website verwendet wird. Er wird gew\u00e4hlt, weil er gut dokumentiert ist und \u00fcberall auf der Welt funktionieren sollte (einschlie\u00dflich an Orten mit nicht-lateinischen Ortsnamen). Es gibt jedoch ein paar Nachteile - es ist sehr viel ein Kompromiss, der global funktionieren soll, und es ist ziemlich kompliziert zu verstehen und zu modifizieren, falls Sie das tun m\u00fcssen.</p> <p>Die Heimat von \"OpenStreetMap Carto\" im Web ist https://github.com/gravitystorm/openstreetmap-carto/ und es hat seine eigenen Installationsanweisungen unter https://github.com/gravitystorm/openstreetmap-carto/blob/master/INSTALL.md, obwohl wir hier alles abdecken, was getan werden muss.</p> <p>Hier gehen wir davon aus, dass wir die Details des Stylesheets in einem Verzeichnis unter \"src\" im Home-Verzeichnis des Benutzers \"renderaccount\" (oder welchen anderen Sie verwenden) speichern.</p> <pre><code>cd ~/src\ngit clone https://github.com/gravitystorm/openstreetmap-carto\ncd openstreetmap-carto\n</code></pre> <p>Als n\u00e4chstes installieren wir eine geeignete Version des \"carto\"-Compilers.</p> <pre><code>sudo npm install -g carto\ncarto -v\n</code></pre> <p>Das sollte eine Versionsnummer zur\u00fcckgeben, die gr\u00f6\u00dfer als 1.2.0 ist. Wenn das nicht der Fall ist, m\u00fcssen Sie m\u00f6glicherweise eine neuere Version von \"carto\" installieren. Wenn Sie das tun m\u00fcssen, k\u00f6nnen Sie dies mit dem folgenden Befehl tun: Dann konvertieren wir das Carto-Projekt in etwas, das Mapnik verstehen kann</p> <pre><code>carto project.mml &gt; mapnik.xml\n</code></pre>"},{"location":"Server/Kachelserver/Server204/#daten-laden","title":"Daten laden","text":"<pre><code>mkdir ~/data\ncd ~/data\nwget https://download.geofabrik.de/europe/germany/schleswig-holstein-latest.osm.pbf\nosmosis --read-pbf file=schleswig-holstein-latest.osm.pbf --bounding-box left=10.1141 right=10.3716 top=53.7136 bottom=53.6249 --write-pbf file=ahrensburg.pbf\nosm2pgsql -d gis --create --slim  -G --hstore --tag-transform-script ~/src/openstreetmap-carto/openstreetmap-carto.lua -C 2500 --number-processes 1 -S ~/src/openstreetmap-carto/openstreetmap-carto.style ~/data/ahrensburg.pbf\n</code></pre>"},{"location":"Server/Kachelserver/Server204/#erstellen-von-indizes","title":"Erstellen von Indizes","text":"<p>Seit Version v5.3.0 m\u00fcssen einige zus\u00e4tzliche Indizes nun manuell angewendet werden.</p> <pre><code>cd ~/src/openstreetmap-carto/\npsql -d gis -f indexes.sql\n</code></pre> <p>Es sollte 14 Mal mit \"CREATE INDEX\" antworten.</p>"},{"location":"Server/Kachelserver/Server204/#shapefile-download","title":"Shapefile-Download","text":"<p>Obwohl die meisten Daten zur Erstellung der Karte direkt aus der oben heruntergeladenen OpenStreetMap-Datendatei stammen, werden immer noch einige Shapefiles f\u00fcr Dinge wie L\u00e4ndergrenzen bei geringer Zoomstufe ben\u00f6tigt. Um diese herunterzuladen und zu indizieren:</p> <pre><code>cd ~/src/openstreetmap-carto/\nscripts/get-external-data.py\n</code></pre> <p>Dieser Prozess beinhaltet einen erheblichen Download und kann einige Zeit in Anspruch nehmen - w\u00e4hrend er l\u00e4uft, wird nicht viel auf dem Bildschirm angezeigt. Tats\u00e4chlich wird ein \"data\"-Verzeichnis unter \"openstreetmap-carto\" gef\u00fcllt.</p>"},{"location":"Server/Kachelserver/Server204/#schriftarten","title":"Schriftarten","text":"<p>In der Version v5.6.0 und h\u00f6her von Carto m\u00fcssen Schriftarten manuell installiert werden:</p> <pre><code>cd ~/src/openstreetmap-carto/\nscripts/get-fonts.sh\n</code></pre>"},{"location":"Server/Kachelserver/Server204/#einrichten-ihres-webservers","title":"Einrichten Ihres Webservers","text":""},{"location":"Server/Kachelserver/Server204/#konfigurieren-von-renderd","title":"Konfigurieren von renderd","text":"<p>Die Konfigurationsdatei f\u00fcr \"renderd\" ist \"/usr/local/etc/renderd.conf\". Bearbeiten Sie diese mit einem Texteditor wie nano:</p> <pre><code>sudo nano /usr/local/etc/renderd.conf\n</code></pre>"},{"location":"Server/Kachelserver/Server204/#apache-konfigurieren","title":"Apache konfigurieren","text":"<pre><code>sudo mkdir /var/lib/mod_tile\nsudo chown renderaccount /var/lib/mod_tile\n\nsudo mkdir /var/run/renderd\nsudo chown renderaccount /var/run/renderd\n</code></pre> <p>Jetzt m\u00fcssen wir Apache \u00fcber \"mod_tile\" informieren, also mit nano (oder einem anderen Editor):</p> <pre><code>sudo nano /etc/apache2/conf-available/mod_tile.conf\n</code></pre> <p>F\u00fcgen Sie die folgende Zeile in diese Datei ein:</p> <pre><code>LoadModule tile_module /usr/lib/apache2/modules/mod_tile.so\n</code></pre> <p>und speichern Sie es, und f\u00fchren Sie dann aus:</p> <pre><code>sudo a2enconf mod_tile\n</code></pre> <p>Das wird Ihnen sagen, dass Sie \"service apache2 reload\" ausf\u00fchren m\u00fcssen, um die neue Konfiguration zu aktivieren; das werden wir noch nicht gleich tun.</p> <p>Wir m\u00fcssen jetzt Apache \u00fcber \"renderd\" informieren. Mit nano (oder einem anderen Editor):</p> <pre><code>sudo nano /etc/apache2/sites-available/000-default.conf\n</code></pre> <p>F\u00fcgen Sie das Folgende zwischen den Zeilen \"ServerAdmin\" und \"DocumentRoot\" ein:</p> <pre><code>LoadTileConfigFile /usr/local/etc/renderd.conf\nModTileRenderdSocketName /var/run/renderd/renderd.sock\n# Timeout before giving up for a tile to be rendered\nModTileRequestTimeout 0\n# Timeout before giving up for a tile to be rendered that is otherwise missing\nModTileMissingRequestTimeout 30\n\n</code></pre> <p>und laden Sie Apache zweimal neu:</p> <pre><code>sudo service apache2 reload\nsudo service apache2 reload\n</code></pre> <p>(Ich vermute, dass es zweimal gemacht werden muss, weil Apache \"verwirrt\" wird, wenn es beim Laufen neu konfiguriert wird)</p> <p>Wenn Sie einen Webbrowser auf: http://ihreserveripadresse/index.html richten, sollten Sie die \"Es funktioniert!\" Seite von Ubuntu / Apache bekommen.</p> <p>(Wenn Sie nicht wissen, welche IP-Adresse zugewiesen wurde, k\u00f6nnen Sie wahrscheinlich \"ifconfig\" verwenden, um es herauszufinden - wenn die Netzwerkkonfiguration nicht zu kompliziert ist, wird es wahrscheinlich die \"inet addr\" sein, die nicht \"127.0.0.1\" ist). Wenn Sie einen Server bei einem Hosting-Anbieter verwenden, dann ist es wahrscheinlich, dass die interne Adresse Ihres Servers anders sein wird als die externe Adresse, die Ihnen zugewiesen wurde, aber diese externe IP-Adresse wird Ihnen bereits zugesandt worden sein und es wird wahrscheinlich diejenige sein, auf der Sie den Server derzeit zugreifen.</p> <p>Beachten Sie, dass dies nur die \"http\" (Port 80) Seite ist - Sie m\u00fcssen ein wenig mehr Apache-Konfiguration machen, wenn Sie https aktivieren wollen, aber das ist au\u00dferhalb des Rahmens dieser Anweisungen. Wenn Sie jedoch \"Let's Encrypt\" verwenden, um Zertifikate auszustellen, dann kann der Prozess der Einrichtung davon auch die Apache HTTPS-Seite konfigurieren.</p>"},{"location":"Server/Kachelserver/Server204/#erstmaliges-ausfuhren-von-renderd","title":"Erstmaliges Ausf\u00fchren von renderd","text":"<p>Als n\u00e4chstes f\u00fchren wir renderd aus, um einige Kacheln zu rendern. Zun\u00e4chst f\u00fchren wir es im Vordergrund aus, damit wir Fehler sofort sehen k\u00f6nnen:</p> <pre><code>renderd -f -c /usr/local/etc/renderd.conf\n</code></pre> <p>Hier k\u00f6nnen einige Warnungen auftreten - machen Sie sich dar\u00fcber vorerst keine Sorgen. Sie sollten keine Fehler erhalten. Wenn doch, speichern Sie die vollst\u00e4ndige Ausgabe in einem Pastebin und stellen Sie eine Frage zu dem Problem irgendwo wie help.openstreetmap.org (verlinken Sie auf das Pastebin - f\u00fcgen Sie nicht den gesamten Text in die Frage ein).</p> <p>Richten Sie einen Webbrowser auf: http://ihreserveripadresse/hot/0/0/0.png</p> <p>Sie sollten eine Weltkarte in Ihrem Browser sehen und einige weitere Debug-Informationen auf der Kommandozeile, einschlie\u00dflich \"DEBUG: START TILE\" und \"DEBUG: DONE TILE\". Ignorieren Sie jede \"DEBUG: Failed to read cmd on fd\" Nachricht - es ist kein Fehler. Wenn Sie kein Kachel erhalten und andere Fehler auftreten, speichern Sie erneut die vollst\u00e4ndige Ausgabe in einem Pastebin und stellen Sie eine Frage zu dem Problem irgendwo wie help.openstreetmap.org.</p> <p>Wenn das alles funktioniert, dr\u00fccken Sie Strg-C, um den Rendering-Prozess im Vordergrund zu stoppen.</p>"},{"location":"Server/Kachelserver/Server204/#renderd-im-hintergrund-ausfuhren","title":"Renderd im Hintergrund ausf\u00fchren","text":"<p>Als n\u00e4chstes richten wir \"renderd\" ein, um im Hintergrund zu laufen. Zuerst bearbeiten Sie die Datei \"~/src/mod_tile/debian/renderd.init\", so dass \"RUNASUSER\" auf das Nicht-Root-Konto eingestellt ist, das Sie zuvor verwendet haben, wie zum Beispiel \"renderaccount\", und kopieren Sie es dann in das Systemverzeichnis:</p> <pre><code>nano ~/src/mod_tile/debian/renderd.init\nsudo cp ~/src/mod_tile/debian/renderd.init /etc/init.d/renderd\nsudo chmod u+x /etc/init.d/renderd\nsudo cp ~/src/mod_tile/debian/renderd.service /lib/systemd/system/\n</code></pre> <p>Die Datei \"renderd.service\" ist eine \"systemd\"-Service-Datei. Die hier verwendete Version ruft lediglich alte init-Befehle auf. Um zu testen, ob der Startbefehl funktioniert:</p> <pre><code>sudo /etc/init.d/renderd start\n</code></pre> <p>(Das sollte mit \"[ ok ] Starten von renderd (\u00fcber systemctl): renderd.service\" antworten.)</p> <p>Um es jedes Mal automatisch zu starten:</p> <pre><code>sudo systemctl enable renderd\n</code></pre>"},{"location":"Server/Kachelserver/Server204/#apache-port-andern","title":"Apache port \u00e4ndern","text":"<p>Wenn Sie Apache auf einem anderen Port als 80 laufen lassen m\u00f6chten, k\u00f6nnen Sie dies tun, indem Sie die Datei \"/etc/apache2/ports.conf\" bearbeiten. Zum Beispiel, um es auf Port 8090 zu \u00e4ndern:</p> <pre><code>sudo nano /etc/apache2/ports.conf\n</code></pre> <p>\u00c4ndern Sie die Zeile \"Listen 80\" in \"Listen 8090\" und speichern Sie die Datei. Starten Sie dann Apache neu:</p> <p>und sudo nano /etc/apache2/sites-available/000-default.conf</p> <p>\u00c4ndern Sie die Zeile \"Listen 80\" in \"Listen 8090\" und speichern Sie die Datei. Starten Sie dann Apache neu:</p> <pre><code>sudo /etc/init.d/apache2 restart\n</code></pre>"},{"location":"Server/Kachelserver/Server204/#ahrensburgcity-installieren","title":"ahrensburg.city installieren","text":"<pre><code>sudo apt install snapd\nsudo apt-get install nginx\nsudo rm /etc/nginx/sites-enabled/default\nsudo systemctl stop nginx\nsudo snap install --classic certbot\nsudo ln -s /snap/bin/certbot /usr/bin/certbot\nsudo systemctl stop nginx\nsudo certbot certonly --standalone -d ahrensburg.city -d www.ahrensburg.city\nsudo certbot certonly --standalone -d karte.ahrensburg.city\n\nsudo nano /etc/nginx/conf.d/karte.conf\n</code></pre> <pre><code> server {\n    listen 443 ssl http2;\n    listen [::]:443 ssl http2;\n    server_name karte.ahrensburg.city;\n    ssl_certificate /etc/letsencrypt/live/karte.ahrensburg.city/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/karte.ahrensburg.city/privkey.pem;\n\n   location / {\n        proxy_pass http://localhost:8090;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection 'upgrade';\n        proxy_set_header Host $host;\n        proxy_cache_bypass $http_upgrade;\n    }\n}\nserver {\n    listen 80;\n    listen [::]:80;\n    server_name karte.ahrensburg.city;\n    return 301 https://$host$request_uri;\n}\n</code></pre> <pre><code>## Neuen Nutzer erstellen\n```bash\nsudo adduser thorsten\nsudo usermod -aG sudo thorsten\nexit\n</code></pre>"},{"location":"Server/Kachelserver/Server204/#ssh-thorsten","title":"ssh thorsten","text":"<pre><code>ssh thorsten@\ncd $HOME\nsudo -u postgres -i\ncreateuser thorsten\ncreatedb -E UTF8 -O thorsten thorsten\npsql\n\\c thorsten\nCREATE EXTENSION postgis;\nCREATE EXTENSION hstore;\nALTER TABLE geometry_columns OWNER TO thorsten;\nALTER TABLE spatial_ref_sys OWNER TO thorsten;\n## Passwort f\u00fcr den Benutzer postgres setzen\n\\password thorsten\n\\q\nexit\n</code></pre>"},{"location":"Server/Kachelserver/Server204/#herunterladen-der-daten","title":"Herunterladen der Daten","text":"<pre><code>cd $HOME\nwget https://download.geofabrik.de/europe/germany/schleswig-holstein-latest.osm.pbf\nosmosis --read-pbf file=schleswig-holstein-latest.osm.pbf --bounding-box left=10.1141 right=10.3716 top=53.7136 bottom=53.6249 --write-pbf file=ahrensburg.pbf\n\nosm2pgsql  -d thorsten --create  -G --hstore  ahrensburg.pbf\n</code></pre>"},{"location":"Server/Kachelserver/Server224/","title":"Server22.04","text":""},{"location":"Server/Kachelserver/Server224/#installieren-ubuntu-2204","title":"Installieren Ubuntu 22.04","text":""},{"location":"Server/Kachelserver/Server224/#nutzer-erstellen","title":"Nutzer erstellen","text":"<p>Neuen Nutzer erstellen</p> <pre><code>sudo adduser --force-badname _renderd\nsudo usermod -aG sudo _renderd\nexit\n</code></pre>"},{"location":"Server/Kachelserver/Server224/#ssh-_renderd","title":"ssh _renderd","text":"<pre><code>ssh _renderd@\n</code></pre>"},{"location":"Server/Kachelserver/Server224/#vorbereitung","title":"Vorbereitung","text":""},{"location":"Server/Kachelserver/Server224/#gaanze-neue-postgrs-datenbank","title":"Gaanze Neue Postgrs Datenbank","text":"<pre><code>sudo apt install -y postgresql-common\nsudo /usr/share/postgresql-common/pgdg/apt.postgresql.org.sh\nsudo apt update\n</code></pre>"},{"location":"Server/Kachelserver/Server224/#nodejs","title":"Nodejs","text":"<ul> <li>Anleitung Erste Eineichrichtung</li> </ul>"},{"location":"Server/Kachelserver/Server224/#weitere-pakete","title":"Weitere Pakete","text":"<pre><code>sudo apt update\nsudo apt upgrade\nsudo apt install screen locate libapache2-mod-tile renderd git tar unzip wget bzip2 apache2 lua5.1 mapnik-utils python3-mapnik python3-psycopg2 python3-yaml gdal-bin fonts-noto-cjk fonts-noto-hinted fonts-noto-unhinted fonts-unifont fonts-hanazono postgresql postgresql-contrib postgis postgresql-16-postgis-3 postgresql-16-postgis-3-scripts osm2pgsql net-tools curl osmosis\n</code></pre>"},{"location":"Server/Kachelserver/Server224/#postgres","title":"Postgres","text":"<p>Posdtgres Datenbank erstellen</p> <pre><code>sudo -u postgres -i\ncreateuser _renderd\ncreatedb -E UTF8 -O _renderd gis\n</code></pre> <p>Postgres Datenbank konfigurieren</p> <pre><code>psql\n\\c gis\nCREATE EXTENSION postgis;\nCREATE EXTENSION hstore;\nALTER TABLE geometry_columns OWNER TO _renderd;\nALTER TABLE spatial_ref_sys OWNER TO _renderd;\n\\q\nexit\n</code></pre>"},{"location":"Server/Kachelserver/Server224/#mapnik-testen","title":"Mapnik Testen","text":"<pre><code>python3\nimport mapnik\nexit()\n</code></pre>"},{"location":"Server/Kachelserver/Server224/#stylesheet-configuration","title":"Stylesheet configuration","text":"<pre><code>mkdir ~/src\ncd ~/src\ngit clone https://github.com/gravitystorm/openstreetmap-carto\ncd openstreetmap-carto\nsudo npm install -g carto\ncarto -v\ncarto project.mml &gt; mapnik.xml\n</code></pre>"},{"location":"Server/Kachelserver/Server224/#loading-data","title":"Loading data","text":"<pre><code>mkdir ~/data\ncd ~/data\nwget https://download.geofabrik.de/europe/germany/schleswig-holstein-latest.osm.pbf\nosmosis --read-pbf file=schleswig-holstein-latest.osm.pbf --bounding-box left=10.1141 right=10.3716 top=53.7136 bottom=53.6249 --write-pbf file=ahrensburg.pbf\n\nchmod o+rx ~\nsudo -u _renderd osm2pgsql -d gis --create --slim  -G --hstore --tag-transform-script ~/src/openstreetmap-carto/openstreetmap-carto.lua -C 2500 --number-processes 1 -S ~/src/openstreetmap-carto/openstreetmap-carto.style ~/data/ahrensburg.pbf\n</code></pre>"},{"location":"Server/Kachelserver/Server224/#index-erstellen","title":"Index erstellen","text":"<pre><code>cd ~/src/openstreetmap-carto/\nsudo -u _renderd psql -d gis -f indexes.sql\n</code></pre>"},{"location":"Server/Kachelserver/Server224/#shapefile-download","title":"Shapefile download","text":"<pre><code>cd ~/src/openstreetmap-carto/\nmkdir data\nsudo chown _renderd data\nsudo -u _renderd scripts/get-external-data.py\n</code></pre>"},{"location":"Server/Kachelserver/Server224/#fonts","title":"Fonts","text":"<pre><code>cd ~/src/openstreetmap-carto/\nscripts/get-fonts.sh\n</code></pre>"},{"location":"Server/Kachelserver/Server224/#einstellung-renderd","title":"Einstellung renderd","text":"<pre><code>sudo nano /etc/renderd.conf\n</code></pre> <pre><code>[s2o]\nURI=/hot/\nXML=/home/_renderd/src/openstreetmap-carto/mapnik.xml\nHOST=localhost\nTILESIZE=256\nMAXZOOM=20\n</code></pre>"},{"location":"Server/Kachelserver/Server224/#making-sure-that-you-can-see-debug-messages","title":"Making sure that you can see debug messages","text":"<pre><code>sudo nano /usr/lib/systemd/system/renderd.service\n</code></pre> <pre><code>sudo systemctl daemon-reload\nsudo systemctl restart renderd\nsudo systemctl restart apache2\n</code></pre>"},{"location":"Server/Kachelserver/Server224/#apache2","title":"Apache2","text":"<pre><code>sudo /etc/init.d/apache2 restart\n</code></pre>"},{"location":"Server/Kachelserver/Server224/#apache2-port-andern","title":"Apache2 Port \u00e4ndern","text":"<pre><code>sudo nano /etc/apache2/ports.conf\n</code></pre> <pre><code>Listen 8080\n</code></pre>"},{"location":"Server/Kachelserver/Server224/#apache2-reatart","title":"Apache2 Reatart","text":"<pre><code>sudo /etc/init.d/apache2 restart\n</code></pre>"},{"location":"Server/Kachelserver/Server244/","title":"Server24.04","text":""},{"location":"Server/Kachelserver/Server244/#ubuntu-2404-lts-installation","title":"Ubuntu 24.04 LTS Installation","text":"<p>Diese Seite beschreibt, wie man alle notwendige Software installiert, einrichtet und konfiguriert, um einen eigenen Kachelserver zu betreiben. Diese Schritt-f\u00fcr-Schritt-Anleitung wurde f\u00fcr Ubuntu Linux 24.04 (Noble Numbat) geschrieben und im April 2024 getestet.</p>"},{"location":"Server/Kachelserver/Server244/#softwareinstallation","title":"Softwareinstallation","text":"<p>Der OSM-Kachelserver-Stack ist eine Sammlung von Programmen und Bibliotheken, die zusammenarbeiten, um einen Kachelserver zu erstellen. Wie so oft bei OpenStreetMap gibt es viele Wege, dieses Ziel zu erreichen, und fast alle Komponenten haben Alternativen, die verschiedene spezifische Vor- und Nachteile haben. Dieses Tutorial beschreibt die g\u00e4ngigste Version, die der auf den Haupt-Kachelserven von OpenStreetMap.org \u00e4hnlich ist.</p> <p>Er besteht aus 5 Hauptkomponenten: mod_tile, renderd, mapnik, osm2pgsql und einer PostgreSQL/PostGIS-Datenbank. Mod_tile ist ein Apache-Modul, das zwischengespeicherte Kacheln bereitstellt und entscheidet, welche Kacheln neu gerendert werden m\u00fcssen - entweder weil sie noch nicht zwischengespeichert sind oder weil sie veraltet sind. Renderd bietet ein Priorit\u00e4tswarteschlangensystem f\u00fcr verschiedene Arten von Anfragen, um die Last von Renderanfragen zu verwalten und zu gl\u00e4tten. Mapnik ist die Softwarebibliothek, die das eigentliche Rendern durchf\u00fchrt und von renderd verwendet wird.</p> <p>Dank der Arbeit der Debian- und Ubuntu-Maintainer, die neuesten Versionen dieser Pakete in Ubuntu 24.04 zu integrieren, sind diese Anweisungen etwas k\u00fcrzer als einige fr\u00fchere Versionen.</p> <p>Diese Anweisungen wurden geschrieben und gegen einen neu installierten Ubuntu 24.04 Server getestet. Wenn Sie bereits andere Versionen einiger Software installiert haben (vielleicht haben Sie von einer fr\u00fcheren Version aktualisiert, oder Sie haben einige PPAs zum Laden eingerichtet), dann m\u00fcssen Sie m\u00f6glicherweise einige Anpassungen vornehmen.</p> <p>Um diese Komponenten zu erstellen, m\u00fcssen zun\u00e4chst eine Vielzahl von Abh\u00e4ngigkeiten installiert werden.</p> <p>Dieser Leitfaden geht davon aus, dass Sie alles von einem Nicht-Root-Benutzer \u00fcber \"sudo\" ausf\u00fchren. Versuchen Sie nicht, alles unten als Root zu tun; es wird nicht funktionieren.</p> <p>Aktualisieren Sie zun\u00e4chst Ihre Paketliste und installieren Sie die erforderlichen Pakete:</p>"},{"location":"Server/Kachelserver/Server244/#nutzer-erstellen-bei-ubuntu-2404-lts","title":"Nutzer erstellen bei Ubuntu 24.04 LTS","text":"<p>Um einen neuen Nutzer in Ubuntu 24.04 LTS zu erstellen, k\u00f6nnen Sie die folgenden Schritte ausf\u00fchren:</p> <ol> <li> <p>\u00d6ffnen Sie ein Terminalfenster.</p> </li> <li> <p>F\u00fchren Sie den folgenden Befehl aus, um einen neuen Nutzer zu erstellen:</p> </li> </ol> <pre><code>sudo adduser --force-badname _renderd\nsudo usermod -aG sudo _renderd\nexit\n</code></pre>"},{"location":"Server/Kachelserver/Server244/#login-als-neuer-nutzer","title":"Login als neuer Nutzer","text":"<p>Der gegebene Codeblock zeigt, wie man sich als ein bestimmter Nutzer in einem Linux-System einloggt. Der Befehl <code>ssh</code> wird verwendet, um eine sichere Shell-Sitzung zu starten.</p> <pre><code>ssh _renderd@localhost\n</code></pre>"},{"location":"Server/Kachelserver/Server244/#system-aktualisieren-und-upgraden","title":"System aktualisieren und upgraden","text":"<p>Um Ihr Ubuntu-System zu aktualisieren und zu upgraden, k\u00f6nnen Sie die folgenden Befehle verwenden:</p> <ol> <li>System aktualisieren</li> </ol> <p>Der Befehl <code>sudo apt update</code> wird verwendet, um die Paketlisten f\u00fcr Upgrades f\u00fcr Pakete zu aktualisieren, die installiert werden m\u00fcssen, und neue Pakete, die installiert werden k\u00f6nnen.</p> <pre><code>  sudo apt update\n  sudo apt upgrade\n</code></pre>"},{"location":"Server/Kachelserver/Server244/#nodjs-installation","title":"Nodjs Installation","text":"<p>Anleitung zur Installation von Node.js auf Ubuntu 24.04 LTS</p> <pre><code>sudo apt-get install curl\ncurl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.40.1/install.sh | bash\nsource ~/.bashrc\nnvm install 22\n</code></pre>"},{"location":"Server/Kachelserver/Server244/#installation-weitere-pakete","title":"Installation weitere Pakete","text":"<pre><code>sudo apt install screen locate libapache2-mod-tile renderd git tar unzip wget bzip2 apache2 lua5.1 mapnik-utils python3-mapnik python3-psycopg2 python3-yaml gdal-bin postgresql postgresql-contrib postgis postgresql-16-postgis-3 postgresql-16-postgis-3-scripts osm2pgsql net-tools curl osmosis snapd\n</code></pre> <p>An diesem Punkt wurden einige neue Konten hinzugef\u00fcgt. Sie k\u00f6nnen sie mit \"tail /etc/passwd\" sehen. \"postgres\" wird zur Verwaltung der Datenbanken verwendet, die wir zur Speicherung von Daten f\u00fcr das Rendering verwenden. \"_renderd\" wird f\u00fcr den Renderd-Daemon verwendet, und wir m\u00fcssen sicherstellen, dass viele der unten aufgef\u00fchrten Befehle als dieser Benutzer ausgef\u00fchrt werden.</p> <p>Jetzt m\u00fcssen Sie eine PostGIS-Datenbank erstellen. Die Standardwerte verschiedener Programme gehen davon aus, dass die Datenbank \"gis\" hei\u00dft und wir werden in diesem Tutorial die gleiche Konvention verwenden, obwohl dies nicht notwendig ist. Beachten Sie, dass \"_renderd\" unten dem Benutzer entspricht, unter dem der Renderd-Daemon ausgef\u00fchrt wird.</p> <pre><code>sudo -u postgres -i\ncreateuser _renderd\ncreatedb -E UTF8 -O _renderd gis\npsql -d gis -c \"CREATE EXTENSION postgis;\" # Erweiterung hinzuf\u00fcgen\npsql -d gis -c \"CREATE EXTENSION hstore;\" # Erweiterung hinzuf\u00fcgen\npsql -d gis -c \"ALTER TABLE geometry_columns OWNER TO _renderd;\" # Rechte setzen\npsql -d gis -c \"ALTER TABLE spatial_ref_sys OWNER TO _renderd;\" # Rechte setzen\nexit\n</code></pre> <p>(Das wird Sie aus dem Benutzer \"postgres\" herausbringen)</p>"},{"location":"Server/Kachelserver/Server244/#mapnik","title":"Mapnik","text":"<p>Mapnik wurde oben installiert. Wir werden \u00fcberpr\u00fcfen, ob es korrekt installiert wurde, indem wir Folgendes tun:</p> <pre><code>python3\n&gt;&gt;&gt; import mapnik\n&gt;&gt;&gt;\n</code></pre> <p>Wenn Sie keine Fehlermeldung erhalten, ist Mapnik korrekt installiert. Dr\u00fccken Sie \"Ctrl-D\", um Python zu verlassen.</p>"},{"location":"Server/Kachelserver/Server244/#konfiguration-des-stylesheets","title":"Konfiguration des Stylesheets","text":"<p>Jetzt, da alle notwendige Software installiert ist, m\u00fcssen Sie ein Stylesheet herunterladen und konfigurieren.</p> <p>Der Stil, den wir hier verwenden, ist der, der von der \"Standard\"-Karte auf der Website openstreetmap.org verwendet wird. Er wurde gew\u00e4hlt, weil er gut dokumentiert ist und \u00fcberall auf der Welt funktionieren sollte (einschlie\u00dflich an Orten mit nicht-lateinischen Ortsnamen). Es gibt jedoch ein paar Nachteile - es ist sehr viel ein Kompromiss, der global funktionieren soll, und es ist ziemlich kompliziert zu verstehen und zu modifizieren, falls Sie das tun m\u00fcssen.</p> <p>Die Heimat von \"OpenStreetMap Carto\" im Web ist https://github.com/gravitystorm/openstreetmap-carto/ und es hat seine eigenen Installationsanweisungen unter https://github.com/gravitystorm/openstreetmap-carto/blob/master/INSTALL.md , obwohl wir hier alles abdecken, was getan werden muss.</p> <p>Hier gehen wir davon aus, dass wir die Details des Stylesheets in einem Verzeichnis unter \"src\" im Home-Verzeichnis des jeweiligen Nicht-Root-Benutzerkontos speichern, das Sie verwenden; wir werden den Zugriff so \u00e4ndern, dass der Benutzer \"_renderd\" darauf zugreifen kann.</p> <pre><code>mkdir ~/src\ncd ~/src\ngit clone https://github.com/gravitystorm/openstreetmap-carto\ncd openstreetmap-carto\ngit pull --all\ngit switch --detach v5.9.0\n</code></pre> <p>Als n\u00e4chstes installieren wir eine geeignete Version des \"carto\"-Compilers.</p> <pre><code>npm install -g carto\ncarto -v\n</code></pre> <p>Das sollte mit einer Zahl antworten, die mindestens so hoch ist wie:</p> <pre><code>    1.2.0\n</code></pre> <p>Dann konvertieren wir das Carto-Projekt in ein Format, das Mapnik verstehen kann:</p> <pre><code>carto project.mml &gt; mapnik.xml\n</code></pre> <p>Sie haben jetzt ein Mapnik XML-Stylesheet unter /home/IhrBenutzerkonto/src/openstreetmap-carto/mapnik.xml .</p>"},{"location":"Server/Kachelserver/Server244/#daten-laden","title":"Daten laden","text":"<p>Zun\u00e4chst laden wir nur eine kleine Menge an Testdaten. Es sind andere Download-Standorte verf\u00fcgbar, aber \"download.geofabrik.de\" bietet eine breite Palette an Optionen. In diesem Beispiel laden wir die Daten f\u00fcr Schlewig Holstein herunter, die derzeit etwa 32Mb gro\u00df sind.</p> <p>Navigieren Sie zu https://download.geofabrik.de/europe/germany/schleswig-holstein.html und beachten Sie das Datum \"Diese Datei wurde zuletzt ge\u00e4ndert\" (z.B. \"2024-04-24T20:21:40Z\"). Wir werden das sp\u00e4ter ben\u00f6tigen, wenn wir die Datenbank mit den nachfolgenden \u00c4nderungen der Menschen an OpenStreetMap aktualisieren wollen. Laden Sie es wie folgt herunter:</p> <pre><code>mkdir ~/data\ncd ~/data\nwget https://download.geofabrik.de/europe/germany/schleswig-holstein-latest.osm.pbf\nosmosis --read-pbf file=schleswig-holstein-latest.osm.pbf --bounding-box left=10.1141 right=10.3716 top=53.7136 bottom=53.6249 --write-pbf file=ahrensburg.pbf\n\n</code></pre> <p>Als n\u00e4chstes m\u00fcssen wir sicherstellen, dass der Benutzer \"_renderd\" auf das Stylesheet zugreifen kann. Um dies zu erm\u00f6glichen, ben\u00f6tigt er Zugriff auf den Ort, an dem Sie es heruntergeladen haben, und standardm\u00e4\u00dfig hat er keinen Zugriff auf Ihr Home-Verzeichnis. Wenn es sich in \"src\" unter Ihrem Benutzerkonto befindet, dann</p> <pre><code>chmod a+rx ~\n</code></pre> <p>wird funktionieren. Wenn Sie dies nicht tun m\u00f6chten, k\u00f6nnen Sie es verschieben und die Verweise auf die Dateiorte in den nachfolgenden Befehlen \u00e4ndern.</p> <p>Der folgende Befehl wird die zuvor heruntergeladenen OpenStreetMap-Daten in die Datenbank einf\u00fcgen. Dieser Schritt ist sehr intensiv in Bezug auf die Festplatten-I/O; der Import des gesamten Planeten kann je nach Hardware viele Stunden, Tage oder Wochen dauern. F\u00fcr kleinere Extrakte ist die Importzeit entsprechend viel schneller, und Sie m\u00fcssen m\u00f6glicherweise mit verschiedenen -C-Werten experimentieren, um in den verf\u00fcgbaren Speicher Ihres Rechners zu passen. Beachten Sie, dass der Benutzer \"_renderd\" f\u00fcr diesen Prozess verwendet wird.</p> <pre><code>sudo -u _renderd osm2pgsql -d gis --create --slim  -G --hstore --tag-transform-script ~/src/openstreetmap-carto/openstreetmap-carto.lua -C 2500 --number-processes 1 -S ~/src/openstreetmap-carto/openstreetmap-carto.style ~/data/ahrensburg.pbf\n</code></pre>"},{"location":"Server/Kachelserver/Server244/#erstellen-von-indizes","title":"Erstellen von Indizes","text":"<p>Seit der Version v5.3.0 m\u00fcssen einige zus\u00e4tzliche Indizes manuell angewendet werden:</p> <pre><code>cd ~/src/openstreetmap-carto/\nsudo -u _renderd psql -d gis -f indexes.sql\n</code></pre> <p>Es sollte 16 Mal mit \"CREATE INDEX\" antworten.</p>"},{"location":"Server/Kachelserver/Server244/#datenbankfunktionen","title":"Datenbankfunktionen","text":"<p>In Version 5.9.0 von \"OSM Carto\" (ver\u00f6ffentlicht im Oktober 2024) m\u00fcssen einige Funktionen manuell in die Datenbank geladen werden. Diese k\u00f6nnen jederzeit hinzugef\u00fcgt / neu geladen werden mit:</p> <pre><code>cd ~/src/openstreetmap-carto/\nsudo -u _renderd psql -d gis -f functions.sql\n</code></pre>"},{"location":"Server/Kachelserver/Server244/#shapefile-download","title":"Shapefile-Download","text":"<p>Obwohl die meisten Daten, die zur Erstellung der Karte verwendet werden, direkt aus der oben heruntergeladenen OpenStreetMap-Datendatei stammen, werden immer noch einige Shapefiles f\u00fcr Dinge wie L\u00e4ndergrenzen bei niedriger Zoomstufe ben\u00f6tigt. Um diese herunterzuladen und zu indizieren, verwenden wir das gleiche Konto wie zuvor:</p> <pre><code>cd ~/src/openstreetmap-carto/\nmkdir data\nsudo chown _renderd data\nsudo -u _renderd scripts/get-external-data.py\n</code></pre> <p>Dieser Prozess beinhaltet einen erheblichen Download und kann einige Zeit in Anspruch nehmen - w\u00e4hrend er l\u00e4uft, wird nicht viel auf dem Bildschirm angezeigt. Einige Daten gehen direkt in die Datenbank, und einige gehen in ein \"data\"-Verzeichnis unter \"openstreetmap-carto\". Wenn hier ein Problem auftritt, dann sind die Natural Earth Daten m\u00f6glicherweise verschoben worden - schauen Sie sich dieses Problem und andere Probleme bei Natural Earth f\u00fcr weitere Details an. Wenn Sie den Download-Ort von Natural Earth \u00e4ndern m\u00fcssen, ist Ihre Kopie dieser Datei diejenige, die Sie bearbeiten sollten.</p>"},{"location":"Server/Kachelserver/Server244/#schriftarten","title":"Schriftarten","text":"<p>In der Version v5.6.0 und h\u00f6her von Carto m\u00fcssen Schriftarten manuell installiert werden:</p> <pre><code>cd ~/src/openstreetmap-carto/\nscripts/get-fonts.sh\n</code></pre> <p>Unser Testdatenbereich (Ahrensburg) wurde sowohl wegen seiner geringen Gr\u00f6\u00dfe als auch wegen einiger Ortsnamen in dieser Region ausgew\u00e4hlt, die Namen mit nicht-lateinischen Zeichen enthalten.</p>"},{"location":"Server/Kachelserver/Server244/#einrichten-ihres-webservers","title":"Einrichten Ihres Webservers","text":""},{"location":"Server/Kachelserver/Server244/#konfigurieren-von-renderd","title":"Konfigurieren von renderd","text":"<p>Die Konfigurationsdatei f\u00fcr \"renderd\" unter Ubuntu 24.04 ist \"/etc/renderd.conf\". Bearbeiten Sie diese mit einem Texteditor wie nano:</p> <pre><code>sudo nano /etc/renderd.conf\n</code></pre> <p>\u00c4ndern Sie die folgenden Zeilen, um sie an Ihre Umgebung anzupassen:</p> <pre><code>[s2o]\nURI=/hot/\nXML=/home/_renderd/src/openstreetmap-carto/mapnik.xml\nHOST=localhost\nTILESIZE=256\nMAXZOOM=20\n</code></pre> <p>Der Pfad zur XML-Datei \"/home/accountname/src/openstreetmap-carto/mapnik.xml\" muss auf den tats\u00e4chlichen Pfad auf Ihrem System ge\u00e4ndert werden. Sie k\u00f6nnen auch \"[s2o]\" und \"URI=/hot/\" \u00e4ndern, wenn Sie m\u00f6chten. Wenn Sie mehr als einen Satz von Kacheln von einem Server rendern m\u00f6chten, k\u00f6nnen Sie das tun - f\u00fcgen Sie einfach einen weiteren Abschnitt wie \"[s2o]\" mit einem anderen Namen hinzu, der auf einen anderen Kartenstil verweist. Wenn Sie m\u00f6chten, dass es sich auf eine andere Datenbank als die Standarddatenbank \"gis\" bezieht, k\u00f6nnen Sie das tun, aber das liegt au\u00dferhalb des Rahmens dieses Dokuments. Wenn Sie nur etwa 2Gb Speicher haben, sollten Sie auch \"num_threads\" auf 2 reduzieren. \"URI=/hot/\" wurde gew\u00e4hlt, damit die hier generierten Kacheln leichter anstelle der HOT-Kachel-Ebene auf OpenStreetMap.org verwendet werden k\u00f6nnen. Sie k\u00f6nnen hier etwas anderes verwenden, aber \"/hot/\" ist genauso gut wie alles andere.</p> <p>Als dieser Leitfaden zum ersten Mal geschrieben wurde, war die von Ubuntu 24.04 bereitgestellte Version von Mapnik 3.1, und die Einstellung \"plugins_dir\" im Abschnitt \"[mapnik]\" der Datei war \"/usr/lib/mapnik/3.1/input\". Dieses \"3.1\" k\u00f6nnte sich in der Zukunft wieder \u00e4ndern. Wenn beim Versuch, Kacheln zu rendern, ein Fehler auftritt, wie dieser:</p> <pre><code>An error occurred while loading the map layer 's2o': Could not create datasource for type: 'postgis' (no datasource plugin directories have been successfully registered)  encountered during parsing of layer 'landcover-low-zoom'\n</code></pre> <p>Dann schauen Sie in \"/usr/lib/mapnik\" und sehen Sie, welche Versionsverzeichnisse es gibt, und schauen Sie auch in \"/usr/lib/mapnik/(version)/input\", um sicherzustellen, dass dort eine Datei \"postgis.input\" existiert.</p> <p>Jetzt, da wir \"renderd\" gesagt haben, wie es auf Kachelrendering-Anfragen reagieren soll, m\u00fcssen wir dem Apache-Webserver sagen, dass er sie senden soll. Leider wurde die Konfiguration daf\u00fcr aus den neuesten Versionen von mod_tile entfernt. Sie kann jedoch derzeit von hier installiert werden</p> <pre><code>cd /etc/apache2/conf-available/\nsudo wget https://raw.githubusercontent.com/openstreetmap/mod_tile/python-implementation/etc/apache2/renderd.conf\nsudo a2enconf renderd\nsudo systemctl reload apache2\n</code></pre>"},{"location":"Server/Kachelserver/Server244/#reload-apache","title":"Reload Apache","text":"<pre><code>sudo nano /usr/lib/systemd/system/renderd.service\nsudo systemctl daemon-reload\nsudo systemctl restart renderd\nsudo systemctl restart apache2\n</code></pre>"},{"location":"Server/Kachelserver/Server244/#apache-port-andern","title":"Apache Port \u00e4ndern","text":"<pre><code>sudo nano /etc/apache2/ports.conf\n</code></pre> <p>\u00c4ndern Sie den Port von 80 auf 8080</p> <pre><code>Listen 8080\n</code></pre> <p>Apache restarten</p> <pre><code>sudo systemctl restart apache2\nsudo apt-get install nginx\nsudo rm /etc/nginx/sites-enabled/default\nsudo systemctl stop nginx\nsudo snap install --classic certbot\nsudo ln -s /snap/bin/certbot /usr/bin/certbot\nsudo systemctl stop nginx\nsudo certbot certonly --standalone -d ahrensburg.city -d www.ahrensburg.city\n\n</code></pre>"},{"location":"Server/Kachelserver/Server244/#neue-nutzer-hinzufugen","title":"Neue Nutzer hinzuf\u00fcgen","text":"<pre><code>sudo adduser thorsten\nsudo usermod -aG sudo thorsten\nexit\n</code></pre> <p>ssh thorsten@localhost</p> <pre><code>ssh thorsten@\ncd $HOME\nsudo -u postgres -i\ncreateuser thorsten\ncreatedb -E UTF8 -O thorsten thorsten\npsql -d thorsten -c \"CREATE EXTENSION postgis;\" # Erweiterung hinzuf\u00fcgen\npsql -d thorsten -c \"CREATE EXTENSION hstore;\" # Erweiterung hinzuf\u00fcgen\npsql -d thorsten -c \"ALTER TABLE geometry_columns OWNER TO _renderd;\" # Rechte setzen\npsql -d thorsten -c \"ALTER TABLE spatial_ref_sys OWNER TO _renderd;\" # Rechte setzen\npsql -d thorsten -c \"\\password thorsten\"\nexit # Ausloggen\n</code></pre>"},{"location":"Server/Kachelserver/Server244/#herunterladen-der-daten","title":"Herunterladen der Daten","text":"<pre><code>cd $HOME\nwget https://download.geofabrik.de/europe/germany/schleswig-holstein-latest.osm.pbf\nosmosis --read-pbf file=schleswig-holstein-latest.osm.pbf --bounding-box left=10.1141 right=10.3716 top=53.7136 bottom=53.6249 --write-pbf file=ahrensburg.pbf\n\nosm2pgsql  -d thorsten --create  -G --hstore  ahrensburg.pbf\n</code></pre>"},{"location":"Server/Kachelserver/Server244/#debug-logging-fur-renderd-aktivieren","title":"Debug-Logging f\u00fcr renderd aktivieren","text":"<p>Um detaillierte Fehlermeldungen und Debug-Ausgaben vom Renderd-Dienst zu erhalten, kann folgende Zeile in der Service-Datei erg\u00e4nzt werden:</p> <pre><code>sudo nano /usr/lib/systemd/system/renderd.service\n</code></pre> <p>F\u00fcge unterhalb von <code>[Service]</code> diese Zeile ein:</p> <pre><code>Environment=G_MESSAGES_DEBUG=all\n</code></pre> <p>Danach die Konfiguration neu laden und Dienste neu starten:</p> <pre><code>sudo systemctl daemon-reload\nsudo systemctl restart renderd\nsudo systemctl restart apache2\n</code></pre>"},{"location":"Server/Kachelserver/Server244/#beispiel-html-fur-leaflet-zum-testen-der-tiles","title":"Beispiel-HTML f\u00fcr Leaflet zum Testen der Tiles","text":"<p>Um die Kacheln im Browser zu testen, kann eine Beispielseite mit Leaflet verwendet werden:</p> <pre><code>cd /var/www/html\nsudo wget https://raw.githubusercontent.com/SomeoneElseOSM/mod_tile/switch2osm/extra/sample_leaflet.html\nsudo nano sample_leaflet.html\n</code></pre> <p>Passe darin die IP-Adresse (<code>127.0.0.1</code>) auf die Adresse deines Servers an, damit du von anderen Ger\u00e4ten darauf zugreifen kannst. Rufe dann im Browser auf:</p> <pre><code>http://&lt;deine-server-ip&gt;/sample_leaflet.html\n</code></pre>"},{"location":"Server/Kachelserver/Server244/#monitoring-der-tile-requests","title":"Monitoring der Tile-Requests","text":"<p>Um Tile-Anfragen und Render-Vorg\u00e4nge live zu \u00fcberwachen, kann folgender Befehl genutzt werden:</p> <pre><code>tail -f /var/log/syslog | grep \" TILE \"\n</code></pre> <p>So siehst du, wann Tiles angefragt und wann sie fertig gerendert werden.</p>"},{"location":"Server/Kachelserver/Server244/#modtilemissingrequesttimeout-erhohen","title":"ModTileMissingRequestTimeout erh\u00f6hen","text":"<p>Falls Kacheln zu schnell als \"grau\" angezeigt werden, kann der Timeout in der Datei <code>/etc/apache2/conf-available/renderd.conf</code> angepasst werden:</p> <pre><code>sudo nano /etc/apache2/conf-available/renderd.conf\n</code></pre> <p>Erh\u00f6he z.B.:</p> <pre><code>ModTileMissingRequestTimeout 30\n</code></pre> <p>Danach Renderd und Apache neu starten:</p> <pre><code>sudo systemctl restart renderd\nsudo systemctl restart apache2\n</code></pre>"},{"location":"Tools/Analysetool/","title":"Analysetool","text":""},{"location":"Tools/Analysetool/#nutzliche-tools-fur-open-source-projekte","title":"N\u00fctzliche Tools f\u00fcr Open-Source-Projekte","text":"<ul> <li>deps Ein Tool zur Analyse der Abh\u00e4ngigkeiten eines Projekts</li> <li>osv Eine verteilte Schwachstellendatenbank f\u00fcr Open Source</li> </ul>"},{"location":"Tools/Analysetool/#analyse-von-code-in-c","title":"Analyse von Code in C++","text":""},{"location":"Tools/Analysetool/#statische-analyse-tools","title":"Statische Analyse-Tools","text":"<ul> <li>Cppcheck Ein statisches Analyse-Tool f\u00fcr C/C++-Code</li> <li>Clang Static Analyzer Ein weiteres statisches Analyse-Tool f\u00fcr C/C++-Code</li> </ul>"},{"location":"Tools/Analysetool/#dynamische-analyse-tools","title":"Dynamische Analyse-Tools","text":"<ul> <li>Valgrind Ein dynamisches Analyse-Tool f\u00fcr C/C++-Code</li> <li>AddressSanitizer Ein weiteres dynamisches Analyse-Tool f\u00fcr C/C++-Code</li> </ul>"},{"location":"Tools/Analysetool/#ide-integration-analyse-tools-fur-c-in-visual-studio-code","title":"Ide Integration Analyse-Tools f\u00fcr C++ in Visual Studio Code","text":"<ul> <li>C/C++ f\u00fcr Visual Studio Code: Eine Erweiterung, die Debugging, IntelliSense, Codeformatierung, Browsing und mehr f\u00fcr C und C++ in Visual Studio Code bietet.</li> <li>Code Runner: Eine Erweiterung, die es erm\u00f6glicht, Code in fast jeder Sprache mit einem einzigen Klick auszuf\u00fchren.</li> <li>CMake Tools : Diese Erweiterung bietet Entwicklern eine robuste und bequeme Workflow-Umgebung f\u00fcr CMake-basierte Projekte in Visual Studio Code.</li> <li>Doxygen Documentation Generator : Diese Erweiterung generiert / aktualisiert Kommentare aus Funktionssignaturen.</li> </ul>"},{"location":"Tools/Analysetool/#code-review-tools","title":"Code-Review-Tools","text":"<ul> <li>CodeFactor Ein Tool zur automatischen Code-Review</li> </ul>"},{"location":"Tools/Benchmark/","title":"Web Framework Benchmarks","text":"<ul> <li>TechEmpower ist eine Technologieberatungsfirma, die sich auf ma\u00dfgeschneiderte Webanwendungen spezialisiert hat. Sie sind besonders bekannt f\u00fcr ihre Web Framework Benchmarks, bei denen sie die Leistung von Hunderten von Web-Frameworks testen und vergleichen. Diese Benchmarks sind eine wertvolle Ressource f\u00fcr Entwickler, die die Leistung verschiedener Technologien bewerten m\u00f6chten.</li> <li>Web Frameworks Benchmark ist eine Website, die eine visuelle Darstellung der Leistung verschiedener Web-Frameworks bietet. Die Daten f\u00fcr die Benchmarks stammen von TechEmpower. Auf der Website k\u00f6nnen Benutzer verschiedene Frameworks ausw\u00e4hlen und deren Leistung in verschiedenen Kategorien vergleichen, wie z.B. JSON-Serialisierung, Datenbankzugriff und Server-zu-Server-Kommunikation.</li> </ul>"},{"location":"Tools/Pandoc/","title":"Pandoc","text":""},{"location":"Tools/Pandoc/#pandoc-installieren","title":"Pandoc Installieren","text":"<p>Pandoc ist ein universeller Dokumentenkonverter, der von John MacFarlane entwickelt wurde. Er kann unter anderem Markdown, HTML, LaTeX und viele andere Formate ineinander umwandeln.</p>"},{"location":"Tools/Pandoc/#installieren-unter-ubuntu","title":"Installieren unter Ubuntu","text":"<p>Pandoc kann unter Ubuntu mit dem folgenden Befehl installiert werden:</p> <pre><code>sudo apt-get install pandoc\n</code></pre> <p>Mardown zu mediawiki:</p> <pre><code>\npandoc -f markdown -t mediawiki -o Datenschutz.wiki Datenschutz.md\n</code></pre>"}]}